<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>Composing (Clojure) Web Stacks using Functional First Principles</title>
<meta name="author" content="Aditya Athalye"/>
<meta name="description" content=""/>
<meta name="keywords" content=""/>
<style type="text/css">
.underline { text-decoration: underline; }
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js/dist/reveal.css"/>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js/dist/theme/moon.css" id="theme"/>


<!-- If the query includes 'print-pdf', include the PDF print sheet -->
<script>
    if( window.location.search.match( /print-pdf/gi ) ) {
        var link = document.createElement( 'link' );
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = 'https://cdn.jsdelivr.net/npm/reveal.js/css/print/pdf.css';
        document.getElementsByTagName( 'head' )[0].appendChild( link );
    }
</script>
</head>
<body>
<div class="reveal">
<div class="slides">
<section id="sec-title-slide"><h2>Composing (Clojure) Web Stacks using Functional First Principles</h2>
<h3>Functional Conf, 2025</h3>
<p><b>Aditya Athalye</b>
<p><em><a href="https://evalapply.org" target="_blank">evalapply.org</a><br/>(about, contact, hire)</em></p>
<p>2025-01-24</p>
</section>
<section id="sec-table-of-contents"><div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#/slide-org0b3328c">1. init!</a></li>
<li><a href="#/slide-orgb819367">2. Session breakdown</a></li>
<li><a href="#/slide-org0600f71">3. GOTO Workshop Content</a></li>
<li><a href="#/slide-org4695454">4. Demo</a></li>
<li><a href="#/slide-org3af791c">5. Roundup: Clojurish Software Design Maxims</a></li>
<li><a href="#/slide-org99ce116">6. Thanks!</a></li>
</ul>
</div>
</div>
</section>

<section>
<section id="slide-org0b3328c">
<h2 id="org0b3328c"><span class="section-number-2">1.</span> init!</h2>
<div class="outline-text-2" id="text-1">
</div>
</section>
</section>
<section>
<section id="slide-org5f2d0df">
<h3 id="org5f2d0df"><span class="section-number-3">1.1.</span> Statutory Health Warning!</h3>

<div id="orgae3cc5a" class="figure">
<p><img src="lisplogo_warning2_256.png" alt="Warning! Built with Lisp." width="300" /><br />
</p>
</div>

</section>
</section>
<section>
<section id="slide-org55ceec7">
<h3 id="org55ceec7"><span class="section-number-3">1.2.</span> Approach</h3>
<ul>
<li><b>Real talk</b>: What I do f'realz<br /></li>

<li><b>No magic</b>: <a href="https://github.com/adityaathalye/clojure-multiproject-example">All my codez r urs</a><br /></li>

<li><b>Adult content</b>: Simple != Toy<br /></li>

<li><b>Law of Mouse Pointer</b> üê≠üëâ<br />
<ul>
<li>Not for you? Click out!<br /></li>

</ul></li>

<li><b>Async., FTW!</b> üí¨üí¨üí¨üí¨üí¨<br />
<ul>
<li>All the Qs! Puns! Hot takes! ‚úÖ<br /></li>
<li>Have fn! ü•≥<br /></li>
<li>Keep it classy! üòé<br /></li>

</ul></li>

</ul>

</section>
</section>
<section>
<section id="slide-orgb819367">
<h2 id="orgb819367"><span class="section-number-2">2.</span> Session breakdown</h2>
<div class="outline-text-2" id="text-2">
</div>
</section>
</section>
<section>
<section id="slide-orge1aac79">
<h3 id="orge1aac79"><span class="section-number-3">2.1.</span> Official Session (90 mins)</h3>
<ul>
<li>I Drive (~20 min)<br />
<ul>
<li>fast-paced<br /></li>
<li>scripted live demo<br /></li>
<li>feel free to discuss/ask in chat<br /></li>

</ul></li>

<li>You Drive (~60 min)<br />
<ul>
<li>you-paced<br /></li>
<li>free-for-all hallway track<br /></li>
<li>make me struggle to live code answers<br /></li>

</ul></li>

</ul>

</section>
</section>
<section>
<section id="slide-org8fc0ccb">
<h3 id="org8fc0ccb"><span class="section-number-3">2.2.</span> Unofficial Unsession ($TillTheyKickUsOut mins)</h3>
<ul>
<li>GOTO Hangout Table<br />
<ul>
<li>Live Video<br /></li>
<li>mooaaarrr Hallway Track!<br /></li>

</ul></li>

</ul>

</section>
</section>
<section>
<section id="slide-org323662a">
<h3 id="org323662a"><span class="section-number-3">2.3.</span> Chat nonstop!</h3>
<p>
Optionally, share:<br />
</p>

<ul>
<li>name / nick<br />
<ul>
<li>Aditya / Adi (he/him)<br /></li>

</ul></li>

<li>title / org<br />
<ul>
<li>C(E/A)O / evalapply.org<br /></li>

</ul></li>

<li>Web Dev. (Y/N)? Y<br />
<ul>
<li>For ‚ô•: Clojure (+ libs, SQLite, HTMX)<br /></li>
<li>For $: Clojure (+ libs, SQLite, HTMX)<br /></li>

</ul></li>

<li><p>
Do u even Cloje?<br />
</p>
<div class="org-src-container">

<pre  class="src src-clojure"   ><code trim>user=&gt; (map always-be-clojing? [‚ô• $])
[‚ô• $] ; emoji if yes, else nil
</code></pre>
</div></li>

</ul>

</section>
</section>
<section>
<section id="slide-org0600f71">
<h2 id="org0600f71"><span class="section-number-2">3.</span> GOTO Workshop Content</h2>
<ul>
<li>This deck<br />
<ul>
<li><a href="https://www.evalapply.org/posts/clojure-web-app-from-scratch/deck.html">evalapply.org/posts/clojure-web-app-from-scratch/deck.html</a><br /></li>

</ul></li>
<li>Source code for session<br />
<ul>
<li><a href="https://github.com/adityaathalye/clojure-multiproject-example/tree/develop/projects/fnconf2025">github.com/adityaathalye/clojure-multiproject-example/tree/develop/projects/fnconf2025</a><br /></li>

</ul></li>
<li>Related blog posts<br />
<ul>
<li><a href="https://www.evalapply.org/tags/clojure/">evalapply.org/tags/clojure</a><br /></li>

</ul></li>
<li>Original <a href="https://confengine.com/conferences/functional-conf-2025/proposal/21251/composing-clojure-web-stacks-using-functional-first-principles">conference proposal</a><br /></li>

</ul>

</section>
</section>
<section>
<section id="slide-org4695454">
<h2 id="org4695454"><span class="section-number-2">4.</span> Demo</h2>
<ul>
<li>Focus: primary intuition-building üß†üóº<br />
<ul>
<li>ideas, names, behaviours, design sensibilities<br /></li>
<li>general dev workflow (REPL DD)<br /></li>

</ul></li>

<li>De-focus: secondary details ü§®üîé‚ùå<br />
<ul>
<li>syntax, parentheses, types<br /></li>
<li>specific IDE and/or dev tooling<br /></li>

</ul></li>

</ul>

</section>
</section>
<section>
<section id="slide-org7785ecb">
<h3 id="org7785ecb"><span class="section-number-3">4.1.</span> Null Project: Demo Calling Convention</h3>
<ul>
<li><p>
Create empty dependency file<br />
</p>
<div class="org-src-container">

<pre  class="src src-shell"   ><code trim>echo '{}' &gt; "deps.edn"
</code></pre>
</div></li>
<li><p>
Create namespace with no-op entry point<br />
</p>
<div class="org-src-container">

<pre  class="src src-shell"   ><code trim>cat &gt; "app.clj" &lt;&lt; 'EOF'
(ns app
  (:gen-class))

(defn -main [])
EOF
</code></pre>
</div></li>
<li><p>
Invoke from cmd line<br />
</p>
<div class="org-src-container">

<pre  class="src src-shell"   ><code trim>$ ls
deps.edn app.clj
$ clojure -M -m app # does nothing
</code></pre>
</div></li>

</ul>
</section>
</section>
<section>
<section id="slide-org11c543b">
<h3 id="org11c543b"><span class="section-number-3">4.2.</span> Catch-All Web App: Simple != Toy</h3>
<ul>
<li><p>
Globally namespaced<br />
</p>
<div class="org-src-container">

<pre  class="src src-text"   ><code trim>deps.edn
src/org/evalapply/catchall_app.clj
</code></pre>
</div></li>

<li><p>
Add basic definitions to <code>deps.edn</code><br />
</p>
<div class="org-src-container">

<pre  class="src src-clojure"   ><code trim>{:paths ["src"]
 :deps {org.clojure/clojure {:mvn/version "1.12.0"}
        ring/ring-jetty-adapter {:mvn/version "1.13.0"}}}
</code></pre>
</div>
<ul>
<li>Add source dir to Java class path<br /></li>
<li>Explicit Clojure dep. (deterministic builds)<br /></li>
<li>Prod-grade clj adapter to Jetty Server<br /></li>

</ul></li>

</ul>

</section>
</section>
<section>
<section id="slide-org1a59359">
<h4 id="org1a59359"><span class="section-number-4">4.2.1.</span> Add "echo" HTTP handler</h4>
<ul>
<li><p>
To <code>catchall_app.clj</code><br />
</p>
<div class="org-src-container">

<pre  class="src src-clojure"   ><code trim>(ns org.evalapply.catchall-app
  (:require [ring.adapter.jetty :as jetty])
  (:gen-class))

(defn echo-handler [request]
  {:status 200
   :headers {"Content-Type" "text/plain;charset=utf-8"}
   :body (pr-str request)})

(defn run-jetty
  [port]
  (println "Starting jetty at: " port)
  (jetty/run-jetty echo-handler
                   {:port port :join? false}))

(defn -main [&amp; args]
  (printl "Calling -main with args: " args)
  (run-jetty 3000))
</code></pre>
</div></li>

</ul>

</section>
</section>
<section>
<section id="slide-orgcdf2805">
<h4 id="orgcdf2805"><span class="section-number-4">4.2.2.</span> Run and try via the command line</h4>
<ul>
<li><p>
Java-like edit-compile-run cycle<br />
</p>
<div class="org-src-container">

<pre  class="src src-shell"   ><code trim>clojure -M -m org.evalapply.catchall-app

curl http://localhost:3000

curl -XPOST http://localhost:3000/foobar

curl http://localhost:3000/foobar?search=%22can%20you%20read%20me%22
</code></pre>
</div></li>

</ul>

</section>
</section>
<section>
<section id="slide-org6d43ff0">
<h4 id="org6d43ff0"><span class="section-number-4">4.2.3.</span> REPL-Driven-Development</h4>
<ul>
<li><p>
<b>Run and <i>mould one's software</i> LIVE</b><br />
</p>
<div class="org-src-container">

<pre  class="src src-clojure"   ><code trim>(comment ; "'Rich' comment form", usually at bottom of .clj file
  ;; Inspect live object
  (do (require 'clojure.reflect)
      (clojure.reflect/reflect server))

  ;; Capture values to inspect them at will.
  (def responses (atom []))

  (defn capture-response
    [response]
    (swap! responses conj response))

  (tap&gt; {:status 200 :body "hi"})

  ;; Try Out dependencies
  ;; - Add without modifying deps.edn file
  ;; - refactor echo-handler to handle json=true query parameter
  ;;   - copy down and replace body (dynamic REPL-driven dev.)
  (require 'clojure.repl.deps)
  (clojure.repl.deps/add-lib 'org.clojure/data.json {:mvn/version "2.5.1"})
  (defn TODO-override-echo-handler []))
</code></pre>
</div></li>

</ul>

</section>
</section>
<section>
<section id="slide-org860b7f2">
<h3 id="org860b7f2"><span class="section-number-3">4.3.</span> Smol "Web 1.0" App</h3>
<p>
<b>"It's Just Data and Functions"</b><br />
</p>
<div class="org-src-container">

<pre  class="src src-text"   ><code trim>deps.edn
build.clj
src/org/evalapply/catchall_app.clj
test/org/evalapply/catchall_app_test.clj
</code></pre>
</div>
<ul>
<li><code>deps.clj</code>: Add real-world HTTP middleware<br /></li>
<li><code>build.clj</code>: deps are data, builds are programs<br /></li>
<li><code>src</code>: make custom router<br /></li>
<li><code>test</code>: to avoid creating a scandal :)<br /></li>

</ul>
</section>
</section>
<section>
<section id="slide-org4134ae9">
<h3 id="org4134ae9"><span class="section-number-3">4.4.</span> Big(ger) Web App</h3>
<p>
Mix in Libraries as needed<br />
</p>
<div class="org-src-container">

<pre  class="src src-clojure"   ><code trim>{:paths ["src"]
 :deps {org.clojure/clojure {:mvn/version "1.12.0"}

        ;; Ring HTTP utilities: https://github.com/ring-clojure/ring
        ring/ring-core {:mvn/version "1.12.2"}
        ring/ring-jetty-adapter {:mvn/version "1.12.2"} ; embedded Jetty
        ring-cors/ring-cors {:mvn/version "0.1.13"}

        ;; System composition and configuration: https://github.com/weavejester/integrant
        integrant/integrant {:mvn/version "0.13.0"} ; define/start/stop system
        aero/aero {:mvn/version "1.1.6"} ; EDN-file-based configuration, might not need it

        ;; HTTP Routing and coercion: https://github.com/metosin/reitit
        metosin/reitit-core {:mvn/version "0.7.2"} ; routing core
        metosin/reitit-ring {:mvn/version "0.7.2"} ; ring router
        metosin/reitit-middleware {:mvn/version "0.7.2"} ; common middleware
        metosin/reitit-malli {:mvn/version "0.7.2"} ; malli coercion

        ;; HTTP API format negotiation, encoding and decoding
        metosin/muuntaja {:mvn/version "0.6.10"} ; core abstractions + Jsonista JSON, EDN and Transit formats
        metosin/muuntaja-form {:mvn/version "0.6.10"} ; application/x-www-form-urlencoded formatter using ring-codec

        ;; Data Utilities
        metosin/malli {:mvn/version "0.16.4"} ; specify, validate, coerce data

        ;; Database Utilities
        com.github.seancorfield/next.jdbc {:mvn/version "1.3.939"} ; JDBC adapter
        org.xerial/sqlite-jdbc {:mvn/version "3.46.1.0"} ; SQLite JDBC driver
        com.zaxxer/HikariCP {:mvn/version "6.0.0"} ; connection pooling

        ;; Web Frontend
        hiccup/hiccup {:mvn/version "2.0.0-RC3"} ; Server-rendered HTML as Clojure data

        ;; Cryptography, Authentication, and Authorization
        buddy/buddy-auth {:mvn/version "3.0.1"} ; authenticate, authorize
        ;; buddy/buddy-hashers {:mvn/version "2.0.167"} ; hashing utils
        ;; buddy/buddy-sign {:mvn/version "3.6.1-359"} ;  High level message signing library.

        ;; Time
        clojure.java-time/clojure.java-time {:mvn/version "1.4.2"}

        ;; Logging
        org.clojure/tools.logging {:mvn/version "1.3.0"}
        org.slf4j/slf4j-simple {:mvn/version "2.0.16"}}}
</code></pre>
</div>

</section>
</section>
<section>
<section id="slide-org94111a6">
<h3 id="org94111a6"><span class="section-number-3">4.5.</span> Frameworks, Starter Kits, Project Management Systems</h3>
<div class="outline-text-3" id="text-4-5">
</div>
</section>
</section>
<section>
<section id="slide-orgdd7d240">
<h4 id="orgdd7d240"><span class="section-number-4">4.5.1.</span> Real-world Starter kits</h4>
<ul>
<li><a href="https://github.com/seancorfield/deps-new#templates">deps-new templates</a><br /></li>
<li><a href="https://github.com/juxt/edge">juxt/edge:</a> <i>A Clojure application foundation from JUXT.</i><br /></li>
<li><a href="https://github.com/brettatoms/zodiac">zodiac</a>: <i>A simple web framework for Clojure.</i><br /></li>
<li><a href="https://caveman.mccue.dev">caveman</a>: <i>A Clojure Web Framework. "complexity very, very bad"</i><br /></li>

</ul>

</section>
</section>
<section>
<section id="slide-org2468033">
<h4 id="org2468033"><span class="section-number-4">4.5.2.</span> Frameworks</h4>
<ul>
<li><a href="https://biffweb.com">Biff</a>: <i>Biff helps solo developers move fast.</i><br /></li>
<li><a href="https://github.com/duct-framework/duct">Duct</a>: <i>Server-side application framework for Clojure</i><br /></li>
<li><a href="https://kit-clj.github.io/">Kit</a>: <i>lightweight, modular framework for scalable web development</i><br /></li>
<li><a href="https://github.com/chr15m/sitefox">Sitefox</a> : <i>Node + cljs backend web framework</i><br /></li>
<li><a href="https://github.com/hoplon">hoplon</a>: <i>A Simpler Way To Program The Web.</i><br /></li>
<li><a href="https://www.hyperfiddle.net/">hyperfiddle</a>: <i>a spreadsheet for internal frontend development</i><br /></li>

</ul>

</section>
</section>
<section>
<section id="slide-org49af9ef">
<h4 id="org49af9ef"><span class="section-number-4">4.5.3.</span> Project Management Systems</h4>
<ul>
<li><a href="https://polylith.gitbook.io/polylith">polylith</a><br />
<ul>
<li>One Source Tree, Many Distinct Apps<br /></li>
<li><i>Polylith is a software architecture that applies</i><br />
<i>functional thinking at the system scale.</i><br />
<i>It helps us build simple, maintainable, testable,</i><br />
<i>and scalable backend systems.</i><br /></li>

</ul></li>

<li>Choose Your Own Adventure<br />
<ul>
<li>e.g. My "<a href="https://github.com/adityaathalye/clojure-multiproject-example">Clojure MultiProject Example</a>"<br /></li>
<li>One Source Tree, Many Sub-Projects, Many Distinct Apps<br /></li>
<li>WIP: Building for my needs<br /></li>

</ul></li>

</ul>
</section>
</section>
<section>
<section id="slide-org3af791c">
<h2 id="org3af791c"><span class="section-number-2">5.</span> Roundup: Clojurish Software Design Maxims</h2>
<div class="outline-text-2" id="text-5">
</div>
</section>
</section>
<section>
<section id="slide-org2d3246e">
<h3 id="org2d3246e"><span class="section-number-3">5.1.</span> Always Be Composing</h3>
<ul>
<li>Immutable Data<br /></li>

<li>Pure Functions<br /></li>

<li>Open-ended Polymorphism (multimethods)<br /></li>

<li>Libraries<br /></li>

<li>Specifications<br /></li>

</ul>

</section>
</section>
<section>
<section id="slide-org3420e49">
<h3 id="org3420e49"><span class="section-number-3">5.2.</span> "It's Just Data"</h3>
<ul>
<li>Describe domain in terms of data.<br />
<ul>
<li>e.g. deps.edn, hiccup, aero, integrant etc.<br /></li>

</ul></li>
<li>Lift domain concepts out of functions.<br />
<ul>
<li>e.g. reitit, interceptors (pedestal, re-frame)<br /></li>

</ul></li>
<li>Stick domain concepts into var metadata<br />
<ul>
<li>e.g. clojure.test fixtures<br /></li>

</ul></li>
<li>Roll your own DSL <i>as plain data</i><br />
<ul>
<li>honeysql (intermediate)<br /></li>
<li>datalog (advanced)<br /></li>
<li>Multimethods are just mini ad-hoc interpreters<br /></li>

</ul></li>

</ul>

</section>
</section>
<section>
<section id="slide-orgcbfecf0">
<h3 id="orgcbfecf0"><span class="section-number-3">5.3.</span> "Decomplect"</h3>
<ul>
<li>Find and pry apart tight couplings<br />
<ul>
<li>deps, fn call chains, file-&gt;code mapping<br /></li>

</ul></li>
<li>Specifications and Contracts<br />
<ul>
<li>clojure.spec, malli<br /></li>

</ul></li>
<li>"System" composition, at build / compile time:<br />
<ul>
<li><i>Clean</i> Dependency Injection<br /></li>
<li>component, integrant, mount<br /></li>

</ul></li>

</ul>

</section>
</section>
<section>
<section id="slide-org3df5b9f">
<h3 id="org3df5b9f"><span class="section-number-3">5.4.</span> "Rich Abstracts So You Don't Have To"</h3>
<ul>
<li>Generic functions over generic data<br /></li>
<li>Mutually composable interfaces<br /></li>
<li>Provide Machine tools instead of Factories<br /></li>
<li>Completely opt-in ("a la carte")<br /></li>

</ul>

</section>
</section>
<section>
<section id="slide-org0a7c621">
<h3 id="org0a7c621"><span class="section-number-3">5.5.</span> "Simplicity"</h3>
<ul>
<li>Really hard to do.<br /></li>
<li>Needs superhuman ability to <i>not</i> write code.<br /></li>
<li>Frequent Hammock use recommended.<br /></li>

</ul>

</section>
</section>
<section>
<section id="slide-org99ce116">
<h2 id="org99ce116"><span class="section-number-2">6.</span> Thanks!</h2>
<p>
Aditya Athalye<br />
<a href="https://evalapply.org/hire.html">evalapply.org/hire</a><br />
</p>

<p>
<i>I help small B2B SaaS development teams deploy writing culture as a 10x-ing strategy.</i><br />
</p>


<div id="orge75edc8" class="figure">
<p><img src="./lisplogo_alien_256.png" alt="Lisp Alien." width="300" /><br />
</p>
</div>
</section>
</section>
</div>
</div>
<script src="https://cdn.jsdelivr.net/npm/reveal.js/dist/reveal.js"></script>

<script>
// Full list of configuration options available here:
// https://github.com/hakimel/reveal.js#configuration
Reveal.initialize({

// Optional libraries used to extend on reveal.js
dependencies: [
 { src: 'https://cdn.jsdelivr.net/npm/reveal.js/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
 { src: 'https://cdn.jsdelivr.net/npm/reveal.js/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
 { src: 'https://cdn.jsdelivr.net/npm/reveal.js/plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
 { src: 'https://cdn.jsdelivr.net/npm/reveal.js/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }]

});

</script>
</body>
</html>
