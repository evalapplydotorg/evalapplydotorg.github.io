<!DOCTYPE html>
<html lang="en" prefix="og: https://ogp.me/ns#">
  <head>
    <!-- Some basic hygiene meta-data -->
<title>Emerging from dotemacs bankruptcy the hard way: integrating the IDE (feat. Clojure(Script))</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="author" content="Aditya Athalye">
<meta name="description"
      content="The one in which we design a rich Integrated Development Environment (IDE) experience, using Clojure as our muse. Featuring Language Server Protocol (lsp-mode + clojure-lsp), clojure-mode, cider, and more! Buckle up and get a coffee.">
<meta name="keywords" content="systems thinking,functional programming,architecture,software design,technology leadership,devops,clojure,B2B Micro SaaS">
<meta property="og:title" content="Emerging from dotemacs bankruptcy the hard way: integrating the IDE (feat. Clojure(Script))">
<meta property="og:description" content="The one in which we design a rich Integrated Development Environment (IDE) experience, using Clojure as our muse. Featuring Language Server Protocol (lsp-mode + clojure-lsp), clojure-mode, cider, and more! Buckle up and get a coffee.">
<meta property="og:locale" content="en_GB">
<meta property="og:type" content="website">
<meta property="og:url" content="https://www.evalapply.org/posts/emerging-from-dotemacs-bankruptcy-ide-experience/index.html">
    <link rel="stylesheet preload" type="text/css" as="style" href="https://www.evalapply.org/static/css/style.css">
<link href="https://www.evalapply.org/index.xml"
      rel="alternate" type="application/rss+xml"
      title="Aditya Athalye writes and works here.">
<link rel="canonical" href="https://www.evalapply.org/posts/emerging-from-dotemacs-bankruptcy-ide-experience/index.html">
<link rel="icon" type="image/vnd.microsoft.icon" href="https://www.evalapply.org/static/img/favicon.ico">
    <base target="_blank">
</head>
  <body>
    <div id="the-very-top" class="stack center box">
        <header id="site-header">
  <div class="box invert stack">
    <div class="with-sidebar site-header">
      <a class="box icon" href="https://www.evalapply.org/index.html" target="_self">
        <img src="https://www.evalapply.org/static/img/Lisp_logo.svg" loading="lazy" alt="Aditya Athalye writes and works here.">
      </a>
      <div class="stack">
        <h1 class="site-header title">Aditya Athalye writes and works here.</h1>
        
        <nav class="cluster site-header site-header:nav-items">
          <a href="https://www.evalapply.org/hire.html#main" target="_self">
  $ work
</a>
<a href="https://www.evalapply.org/posts/index.html" target="_self">
  &#9753; read
</a>
<a href="https://www.youtube.com/@evalapplydotorg/playlists" target="_blank" target="_self">
  &#10087; see
</a>
<a href="https://www.evalapply.org/about.html#standing-invitation" target="_self">
  &#x2709; mail
</a>
<a href="https://www.evalapply.org/about.html" target="_self">
  &lambda; self
</a>
<a href="https://www.evalapply.org/now.html#main" target="_self">
  &raquo; now
</a>
<a href="https://www.evalapply.org/index.xml" target="_blank">
  &asymp; feed
</a>
        </nav>
        <p class="footnotes"> Coming soon (April 2025): "Project
          <a href="https://www.evalapply.org/index.html#writing-for-nerds">
            Writing for nerds"</a>.
        </p>
      </div>
    </div>
  </div>
</header>
  <main id="main">
    <article id="blog-post" class="stack">
  <header class="stack">
      <p class="title">Emerging from dotemacs bankruptcy the hard way: integrating the IDE (feat. Clojure(Script))</p>

      <p class="cluster post-meta">
        <span>[ &darr; <a href="#blog-post-toc" rel="bookmark" target=_self>toc</a> ]</span>
        <span class="date">Published: 2023-09-07</span>
        <span class="date">Updated: 2023-09-25</span>
        <span class="author">By: Aditya Athalye</span>
      </p>

      <p class="summary">
        The one in which we design a rich Integrated Development Environment (IDE) experience, using Clojure as our muse. Featuring Language Server Protocol (lsp-mode + clojure-lsp), clojure-mode, cider, and more! Buckle up and get a coffee.
      </p>

     <div class="post-meta">
      <p><hr></p>
            <nav class="cluster">
        <a href="mailto:blog.comments@evalapply.org?subject=DELETE_ME_HUMAN Emerging from dotemacs bankruptcy the hard way: integrating the IDE (fea" rel="bookmark">&#x2709; email me comments</a>
        <span>&raquo; share &rarr;</span>
        <a href="https://bsky.app/intent/compose?text=Emerging%20from%20dotemacs%20bankruptcy%20the%20hard%20way%3A%20integrating%20the%20IDE%20%28feat.%20Clojure%28Script%29%29%20https%3A%2F%2Fwww.evalapply.org%2Fposts%2Femerging-from-dotemacs-bankruptcy-ide-experience%2Findex.html" target="_blank">[bsky]</a>
        <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fwww.evalapply.org%2Fposts%2Femerging-from-dotemacs-bankruptcy-ide-experience%2Findex.html" target="_blank">[in]</a>
        <a href="https://news.ycombinator.com/submitlink?u=https%3A%2F%2Fwww.evalapply.org%2Fposts%2Femerging-from-dotemacs-bankruptcy-ide-experience%2Findex.html&t=Emerging%20from%20dotemacs%20bankruptcy%20the%20hard%20way%3A%20integrating%20the%20IDE%20%28feat.%20Clojure%28Script%29%29" target="_blank"> [HN]</a>
        <a href="https://lobste.rs/stories/new" target="_blank">[lobste.rs]</a>
        <a href="http://www.reddit.com/submit?url=https%3A%2F%2Fwww.evalapply.org%2Fposts%2Femerging-from-dotemacs-bankruptcy-ide-experience%2Findex.html&title=Emerging%20from%20dotemacs%20bankruptcy%20the%20hard%20way%3A%20integrating%20the%20IDE%20%28feat.%20Clojure%28Script%29%29" target="_blank">[reddit]</a>
        <a class="site-feed" href="https://www.evalapply.org/index.xml" target="_blank">feed</a>
      </nav>
      <p><hr></p>
      <form
  class="footer cluster"
  action="https://buttondown.com/api/emails/embed-subscribe/evalapply"
  method="post"
  target="popupwindow"
  onsubmit="window.open('https://buttondown.com/evalapply', 'popupwindow')"
  >
  <input type="email" name="email" id="bd-email" />
  <span>
    <input type="submit" value="Get posts by email" />
    <input type="hidden" name="tag" value="everyone" />
<input type="hidden" name="tag" value="via-blog-post" />
  </span>
</form>
      <p><hr></p>
      <nav class="cluster">
        <span>Tags:</span>
        <a href="https://www.evalapply.org/tags/programming/index.html#main" target="_self">#programming</a><a href="https://www.evalapply.org/tags/emacs/index.html#main" target="_self">#emacs</a><a href="https://www.evalapply.org/tags/howto/index.html#main" target="_self">#howto</a><a href="https://www.evalapply.org/tags/recurse_center/index.html#main" target="_self">#recurse_center</a><a href="https://www.evalapply.org/tags/clojure/index.html#main" target="_self">#clojure</a>
      </nav>
    </div>
  </header>
  <hr>
  <section class="stack">
      <div id="blog-post-toc" class="stack table-of-contents">
  <details class="box invert stack" open>
    <summary>
      <strong>Contents</strong>
    </summary>
    <nav class="stack">
      <a href="#why-ides" target="_self" class="toc-heading:h1">Why IDEs?</a>
<a href="#what-does-integrated-mean" target="_self" class="toc-heading:h1">What does "Integrated" mean?</a>
<a href="#john-carmack-opines" target="_self" class="toc-heading:h1">John Carmack opines</a>
<a href="#integration-level-one-language-as-plain-text" target="_self" class="toc-heading:h1">Integration Level One: Language as Plain Text</a>
<a href="#integration-level-two-language-as-structured-material-lsp-ftw" target="_self" class="toc-heading:h1">Integration Level Two: Language as Structured Material (LSP FTW!)</a>
<a href="#integration-level-three-a-language-and-its-ecosystem-clojurescript-ftw" target="_self" class="toc-heading:h1">Integration Level Three: A language and its ecosystem: Clojure(Script) FTW!</a>
<a href="#clojure-mode-foundational-clojure-programming-support" target="_self" class="toc-heading:h2">clojure-mode: foundational Clojure programming support</a>
<a href="#clojure-lsp-for-a-static-analysis-style-workflow-no-repl-needed" target="_self" class="toc-heading:h2">clojure-lsp: for a static-analysis style workflow, no REPL needed</a>
<a href="#cider-putting-the-interactive-in-the-ide" target="_self" class="toc-heading:h2">CIDER: Putting the "Interactive" in the IDE</a>
<a href="#clojure-with-org-mode-for-live-demos-and-more" target="_self" class="toc-heading:h2">Clojure with org-mode for live demos and more</a>
<a href="#assist-emacs-with-graphical-interactive-development" target="_self" class="toc-heading:h2">Assist Emacs with <em>Graphical</em> Interactive Development</a>
<a href="#wire-everything-up-using-clojure-deps-and-cli-tools" target="_self" class="toc-heading:h2">Wire everything up using Clojure Deps and CLI tools</a>
<a href="#add-offline-documentation-browsing" target="_self" class="toc-heading:h2">Add offline documentation browsing</a>
<a href="#bonus-demos-and-references" target="_self" class="toc-heading:h1">Bonus demos and references</a>
<a href="#clojure-tooling-evolution" target="_self" class="toc-heading:h2">Clojure tooling evolution</a>
<a href="#clojurists-like-static-analysis-and-repl-powered-tools" target="_self" class="toc-heading:h2">Clojurists like Static Analysis <em>and</em> REPL Powered Tools</a>
<a href="#emacs-is-a-first-rate-c-ide-john" target="_self" class="toc-heading:h2">Emacs is a first-rate C++ IDE, John</a>
<a href="#our-plan-is-complete" target="_self" class="toc-heading:h1">Our plan is complete!</a>
<a href="#footnotes" target="_self" class="toc-heading:h1">Footnotes</a>
    </nav>
  </details>
</div>
<hr>
  <div class="footnotes box invert">
<p>Series: <a href="../emerging-from-dotemacs-bankruptcy/index.html#main">prelude</a> → <a href="../emerging-from-dotemacs-bankruptcy-init-begins/index.html#main">init begins</a> → <a href="../emerging-from-dotemacs-bankruptcy-packages/index.html#main">packages</a> → <a href="../emerging-from-dotemacs-bankruptcy-midway-refactor/index.html#main">midway refactor</a> → <a href="../emerging-from-dotemacs-bankruptcy-getting-about/index.html#main">getting about</a> → <strong>(<a href="../emerging-from-dotemacs-bankruptcy-ide-experience/index.html#main">IDE (ft. Clojure)</a>)</strong> → <a href="https://github.com/adityaathalye/dotemacs">.emacs.d</a></p>
</div>
<blockquote>
<p>Wild brush strokes across canvas</p>
<p>Hands invisible</p>
<p>A cool Starry Night</p>
</blockquote>
<figure>
<img src="emacs-clojure-ide-lsp-cider-reveal-gui.jpeg" />
<figcaption>My Clojure IDE experience, built around Emacs <a href="#fn1" target="_self" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>.</figcaption>
</figure>
<h1 id="why-ides">Why IDEs?</h1>
<p>Programs—even small ones—can be incredibly dense and complex. Beyond a point, they cannot be understood as mere textual entities. Nor can the human mind keep track of a self-updating correct emulation of their live meaning.</p>
<p>This is why people have built, and continue to build, a vast array of tools to help us understand and manipulate <em>meanings</em> of programming languages, their surroundings, and their runtimes.</p>
<p><em>Integrated Development Environments</em> (IDEs) provide bundles of these tools and services to assist the programmer. Tools and services that:</p>
<ul>
<li>are aware of code syntax and semantics, project layouts and structures</li>
<li>are aware of error checks and safeties the language provides (or need bolted-on)</li>
<li>can build, publish, use, run, observe, analyze software artifacts</li>
<li>help experiment with code, e.g. change code as we step through a debugger</li>
<li>these days, even unburden us from pinching StackOverflow answers <a href="#fn2" target="_self" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>.</li>
</ul>
<h1 id="what-does-integrated-mean">What does "Integrated" mean?</h1>
<p>A big task calls for a little philosophical indulgence. I think there are at least two lenses we can use to explore this question.</p>
<p><em><strong>One lens:</strong> Tools integrating with <strong>us</strong> as humans.</em></p>
<p>Emacs, our building material, lets us mould it in our image, all the way from the guts of the lisp machine, to packages we use, to how various modes play off each other, to interoperability with the OS and third party software, to our muscle memory and our brains <a href="#fn3" target="_self" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>.</p>
<p><em><strong>The other lens:</strong> Integrating with how <strong>other things</strong> are integrated.</em></p>
<p>For example, a programming language <em>along with</em> its ecosystem. A plaintext notebook integrating TODOs, checklists, calendar, live code evaluation, export to other formats. A deep integration into code review and CI/CD <a href="#fn4" target="_self" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a>.</p>
<p><em><strong>Perhaps a third lens:</strong> is us integrating back with the development environment…</em></p>
<p>…by learning the tools, using them better, switching them out when we meet their limits. For example, Kotlin is IntelliJ-only. So I just port my daily driver Emacs shortcuts to IntelliJ, run it in "Zen" mode. I know it works because A) colleagues don't believe that it is, in fact, IntelliJ until I restore all the menus, file tree, and sundry visual cues, and because B) my muscle memory is oblivious to the differences. It simply continues taking care of me. <a href="#fn5" target="_self" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a></p>
<h1 id="john-carmack-opines">John Carmack opines</h1>
<p>We can configure our Emacs for this kind of deep integration, with the help of specialist tools designed for each language + ecosystem + runtime.</p>
<p>I will make an appeal to authority to set the touchstone for IDE requirements.</p>
<figure><iframe width="560" height="315" src="https://www.youtube.com/embed/tzr7hRXcwkw" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
  <details class="footnotes">
    <summary>
      <a href="https://www.youtube.com/watch?v=tzr7hRXcwkw">John Carmack on IDEs, focusing on Debuggers</a> - John Carmack with Lex Fridman.
      <p>...
        Anybody who says "Just read the code and think about it"… that's an insane statement. You can't even read all the code of a big system. You have to do experiments on the system.
      </p>
      <p><em>—+ expand for more +—</em></p>
    </summary>
    <p>...
      The very first thing I do after writing new code is to set a debugger and
      step through the function.
    </p>
    <p>...
      When you write code that's going to live for years, and is going to have
      other people working on it, and it's going to be deployed to millions of
      people, then you want to use all of these tools. You <em>want</em> to be told it's
      like "no, you screwed up <em>here, here, and here</em>". That requires an ego check.</p>

    <p>...
      You have to be open to the fact that everything you are doing is just
      <em>littered</em> with flaws. It's not that oh you occasionally have a bad day.
      It's about whatever stream of code you output, there is going to be a
      statistical regularity of things that you just make mistakes on.</p>

    <p>...
      There's the whole argument about test-driven design and unit testing versus
      analysis and different things. I am more in favour of the analysis and the stuff
      that just like "you can't run your program until you've fixed this" rather than
      "you can run it and hopefully a unit test will catch it in some way".</p>
  </details>
</figure>

<p>Ok, motivation! Let's make working config now!</p>
<h1 id="integration-level-one-language-as-plain-text">Integration Level One: Language as Plain Text</h1>
<p>Programs, for better or worse, continue to be written in plain text. Our Emacs already is a pretty good general-purpose text editor that also "just works" for <em>any</em> text based programming language. Neat!</p>
<ul>
<li><code>projectile</code> for project-aware directory navigation</li>
<li><code>magit</code> for version control</li>
<li><code>avy</code> + <code>key-chord</code> to fluidly navigate / select text units</li>
<li><code>flyspell</code> for spellchecks</li>
<li><code>yasnippet</code> for boilerplate templates</li>
<li><code>expand-region</code> for incremental selection of units of text</li>
<li><code>multiple-cursors</code> to edit structured text</li>
<li><code>imenu</code> to display top-level names (vars, methods)</li>
<li><code>wgrep</code> for grep-powered search/replace across multiple files</li>
<li><code>eldoc</code> to surface function doc-strings and argument lists</li>
<li><code>paren</code> + <code>smartparens</code> for structural editing support, which works uniformly across Lispy languages, as well as for data representations in most other languages (e.g. quoted strings, JSON data, python tuples and dicts etc.)</li>
</ul>
<p>However we can <em>and should</em> do better. Much better! <a href="#fn6" target="_self" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a></p>
<h1 id="integration-level-two-language-as-structured-material-lsp-ftw">Integration Level Two: Language as Structured Material (LSP FTW!)</h1>
<p>We write and modify code not as plain text, but as structural elements of the programming language at hand; viz. its syntax, semantics, idioms, patterns, conventions, method or function call graphs, object hierarchies, compiler feedback etc.</p>
<p>Historically, language-aware editors and IDEs have been purpose-built for individual languages. Emacs has historically been extended to new languages, because we can <a href="#fn7" target="_self" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a>. In all cases, everyone has had to implement the same set of features from scratch, such as, auto-complete, documentation on hover, go to definition, code browsing, project browsing etc.</p>
<p>Recently, the <a href="https://microsoft.github.io/language-server-protocol/">Language Server Protocol (LSP) Project</a> changed the game, and quickly became foundational infrastructure for code editors <a href="#fn8" target="_self" class="footnote-ref" id="fnref8" role="doc-noteref"><sup>8</sup></a>. So much so that Emacs 29 baked in the <a href="https://github.com/joaotavora/eglot">eglot</a> language server client. We also have the <a href="https://github.com/emacs-lsp/">Emacs LSP</a> project that gives us <a href="https://emacs-lsp.github.io/">lsp-mode</a>, and other packages with which to design a general-purpose IDE experience.</p>
<p>I have been itching to design my baseline programming workflow around LSP. Familiarity with Emacs lsp-mode led me to choose it. Though I will probably switch to eglot whenever I upgrade my Emacs. I am using:</p>
<ul>
<li><a href="https://github.com/emacs-lsp/lsp-mode">lsp-mode</a>: Emacs client/library for the Language Server Protocol</li>
<li><a href="https://github.com/emacs-lsp/lsp-ui">lsp-ui</a>: inline UI display of flycheck diagnostics, LSP code actions, code lenses, documentation etc.</li>
<li><a href="https://github.com/emacs-lsp/lsp-ivy">lsp-ivy</a>: interactive ivy interface to lsp-mode's workspace symbol functionality</li>
</ul>
<p>Optionally (not sure about these two yet):</p>
<ul>
<li><a href="https://github.com/emacs-lsp/lsp-treemacs">lsp-treemacs</a>: treemacs-driven views of project files, symbols, errors, call graphs etc.</li>
<li><a href="https://github.com/emacs-lsp/dap-mode">dap-mode</a>: "Debug Adapter Protocol", optionally, to integrate language specific debuggers</li>
</ul>
<pre class="elisp"><code>;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;; Programming languages
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

(use-package lsp-mode
  ;; ref: https://emacs-lsp.github.io/lsp-mode/page/installation/#use-package
  :ensure t
  :init
  (setq lsp-keymap-prefix &quot;C-c C-l&quot;)
  :hook ((clojure-mode clojurescript-mode clojurec-mode) . lsp-deferred)
  :hook (lsp-mode . lsp-enable-which-key-integration)
  :custom
  ;; LSP &quot;workspace&quot; dirs:
  ;; nb. &quot;workspace&quot; seems to be a confusing concept. It is a VSCode concept
  ;; that lsp-mode superseded as &quot;session&quot;, because lsp-mode was already using
  ;; the word &quot;workspace&quot; in some other context. See: `lsp-describe-session&#39;.
  ;; https://github.com/emacs-lsp/lsp-mode/discussions/3095
  ;; &quot;workspace&quot; directories still seem to server some purpose (no idea what),
  ;; and seem to be language specific.
  (lsp-clojure-workspace-dir
   (file-name-as-directory (expand-file-name &quot;workspace&quot;
                                             adi/dotemacs-dir)))
  :config
  (setq lsp-server-install-dir (file-name-as-directory ; install local to dotemacs
                                (expand-file-name &quot;lsp&quot; adi/dotemacs-cache-dir))
        ;; Perf. tweaks. Ref: https://emacs-lsp.github.io/lsp-mode/page/performance/
        lsp-idle-delay 0.500 ; bump higher if lsp-mode gets sluggish
        lsp-log-io nil
        ; lsp-enable-indentation nil ; set &#39;nil&#39; to use cider indentation instead of lsp
        ; lsp-enable-completion-at-point nil; set &#39;nil&#39; to use cider completion instead of lsp

        ;; No semgrep. https://emacs-lsp.github.io/lsp-mode/page/lsp-semgrep/
        ;; IDK why semgrep is on by default, docs are thin on configuring it
        ;; I don&#39;t want the error &#39;Command &quot;semgrep lsp&quot; is not present on the path.&#39;
        ;; because I don&#39;t want to &quot;pip install semgrep --user&quot;.
        lsp-semgrep-server-command nil)
  ;; LANGUAGE SPECIFIC SETTINGS
  ;; clojure-lsp: cf. https://clojure-lsp.io/clients/#emacs
  (add-to-list &#39;lsp-language-id-configuration
                `(clojurex-mode . &quot;clojure&quot;))
  :commands (lsp lsp-deferred))

(use-package lsp-ui
  :ensure t
  :after lsp-mode
  :commands lsp-ui-mode
  :bind (:map lsp-ui-mode-map ; h/t github.com/bbatsov/prelude
              ([remap xref-find-definitions] . #&#39;lsp-ui-peek-find-definitions)
              ([remap xref-find-references] . #&#39;lsp-ui-peek-find-references)
              (&quot;C-c C-l .&quot; . &#39;lsp-ui-peek-find-definitions)
              (&quot;C-c C-l ?&quot; . &#39;lsp-ui-peek-find-references)
              (&quot;C-c C-l r&quot; . &#39;lsp-rename)
              (&quot;C-c C-l x&quot; . &#39;lsp-workspace-restart)
              (&quot;C-c C-l w&quot; . &#39;lsp-ui-peek-find-workspace-symbol)
              (&quot;C-c C-l i&quot; . &#39;lsp-ui-peek-find-implementation)
              (&quot;C-c C-l d&quot; . &#39;lsp-describe-thing-at-point)
              (&quot;C-c C-l e&quot; . &#39;lsp-execute-code-action))
  :config
  ; h/t github.com/bbatsov/prelude
  (setq lsp-ui-sideline-enable t
        lsp-ui-doc-enable t
        lsp-ui-peek-enable t
        lsp-ui-peek-always-show t))

(use-package lsp-ivy
  :ensure t
  :after lsp-mode
  :commands lsp-ivy-workspace-symbol)

;; treemacs is cool, but I&#39;m not sure I want it yet.
;; cf: https://github.com/emacs-lsp/lsp-treemacs
;; and https://github.com/Alexander-Miller/treemacs
;; (use-package lsp-treemacs
;;   :ensure t
;;   :after lsp-mode
;;   :commands lsp-treemacs-errors-list
;;   :config
;;   (setq treemacs-space-between-root-nodes nil))

;; dap-mode, optionally to use LANGUAGE-specific debuggers
;; cf. https://emacs-lsp.github.io/lsp-mode/page/installation/#use-package
;; (use-package dap-mode)
;; (use-package dap-LANGUAGE :ensue t :after dap-mode) ; load dap adapter for LANGUAGE
</code></pre>
<h1 id="integration-level-three-a-language-and-its-ecosystem-clojurescript-ftw">Integration Level Three: A language and its ecosystem: Clojure(Script) FTW!</h1>
<p>LSP can solve a good chunk of the overall IDE design problem, but plenty is left for more specialised tools. Often, a language will have properties, runtimes, ecosystems which is out of scope for the language server project. For those needs, language-specific Emacs packages will likely be available.</p>
<p>Using Clojure as a practical example, here are some features we expect.</p>
<ul>
<li>Editing and linting support for all Clojure dialects, viz. Clojure, ClojureScript, Babashka, Cljc files, and EDN.</li>
<li>Tight integration with REPLs, test tools, debugger, profiler.</li>
<li>And hopefully some automagical support for Clojure-like languages such as <a href="https://janet-lang.org/">janet-lang</a>, <a href="https://ferret-lang.org/">ferret-lang</a>.</li>
</ul>
<p>Here are two demos of rock-solid professional Clojure IDE experiences.</p>
<figure>
<iframe width="560" height="315" src="https://www.youtube.com/embed/kjJVfoqFj_k" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
<div class="footnotes">
<p>
<a href="https://www.youtube.com/watch?v=kjJVfoqFj_k&list=PL2Q86tDyogSXCZnAwtxGa5cCmxEKosFZ-&index=1">Clojure Basics: Editor and Tooling Setup</a> is m'colleague Sandy's demo of what
a typical Clojure development setup should be like. Focus on the <em>ideas</em>
and the <em>workflow</em> rather than the editor itself.
</p>
<p>
nb. This video kicks off their "<a href="https://www.youtube.com/playlist?list=PL2Q86tDyogSXCZnAwtxGa5cCmxEKosFZ-">Clojure Basics</a>" playlist, which is worth
watching in its entirety, if your are just starting off your Clojure programming
journey.
</p>
</div>
</figure>

<figure>
  <iframe width="560" height="315" src="https://www.youtube.com/embed/gIoadGfm5T8" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
  <div class="footnotes">
    <p><a href="https://www.youtube.com/embed/gIoadGfm5T8"> REPL Driven Development, Clojure's Superpower </a>Sean Corfield</p>
    <p><em>
        This talk will show you how fundamental Clojure’s REPL is
        to development, and how to build a web application, live, from your
        editor, with no restarts, no refreshes, just simple, basic tooling.
        Clojure’s REPL is truly its superpower:it lets you hold your application
        in your hand, query it, modify it, evolve it, with just a basic set of
        tools and an understanding of what “REPL-friendly development” means.
    </p></em>
  </div>
</figure>

<p>We are well-served by the <a href="https://github.com/clojure-emacs">clojure-emacs</a> and <a href="https://github.com/clojure-lsp">clojure-lsp</a> projects. These, with allied packages enhance our Emacs's baseline programming experience, with Clojure focused features and capabilities.</p>
<h2 id="clojure-mode-foundational-clojure-programming-support">clojure-mode: foundational Clojure programming support</h2>
<p>This major mode provides syntax highlighting, indentation, navigation, and refactoring support for Clojure, ClojureScript, and mixed cljc code.</p>
<p>It also provides language-specific hooks that other modes can use to add more behaviours and features. For example, I want to defer the start of language servers until after a major mode is activated, so I set the hook in the lsp-mode config (<a href="#integration-level-two-language-as-structured-material-lsp-ftw">see above</a>).</p>
<pre class="elisp"><code>(use-package clojure-mode
  ;; Brings in clojure-mode for Clj, clojurescript-mode for Cljs,
  ;; and clojurec-mode for Cljc
  :ensure t
  ;; Hook into subword-mode to work with CamelCase tokens like Java classes
  ;; h/t suvratapte/dot-emacs-dot-d
  :hook ((clojure-mode . subword-mode)
         (clojure-mode . yas-minor-mode))

  :config
  (setq clojure-indent-style &#39;align-arguments)
  :blackout &quot;Clj&quot;)
</code></pre>
<h2 id="clojure-lsp-for-a-static-analysis-style-workflow-no-repl-needed">clojure-lsp: for a static-analysis style workflow, no REPL needed</h2>
<p><em><strong><a href="https://clojure-lsp.io/">clojure-lsp</a></strong></em> is a language server, and Emacs lsp-mode already knows about it (see <a href="#integration-level-two-language-as-structured-material-lsp-ftw">configuration above</a>).</p>
<figure>
<iframe width="560" height="315" src="https://www.youtube.com/embed/grL3DQyvneI" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
<p class="footnotes">
Eric Dallo, a core maintainer of clojure-lsp and emacs-lsp demonstrates <a href="https://www.youtube.com/watch?v=grL3DQyvneI">Turning your editor into a Clojure IDE with clojure-lsp</a>
</p>
</figure>

<p>clojure-lsp helps us <em>"navigate, identify and fix errors, perform refactors and much more!"</em>, with features like:</p>
<ul>
<li>Autocomplete</li>
<li>Jump to definition/implementation</li>
<li>Find references</li>
<li>Renaming</li>
<li>Code actions</li>
<li>Errors</li>
<li>Automatic ns cleaning</li>
<li>Lots of Refactorings</li>
<li>Code lens</li>
<li>Semantic tokens (syntax highlighting)</li>
<li>Linting (via clj-kondo)</li>
<li>Call hierarchy</li>
<li>Java interop</li>
</ul>
<p>All of this is available without even firing up a Clojure REPL, or adding any other package. For example, if we used only <code>clojure-mode</code>, we would have had to add linting support with <code>flycheck-clj-kondo</code> for Clojure and <code>flycheck-joker</code> for ClojureScript. And if we used only CIDER, then for better auto-complete using CIDER, we would use <code>ac-cider</code>.</p>
<p><em>However</em> static analysis is no substitute for programming Clojure interactively, against a live REPL. The excellent CIDER package enhances that for us.</p>
<h2 id="cider-putting-the-interactive-in-the-ide">CIDER: Putting the "Interactive" in the IDE</h2>
<p>In the nearly half century old tradition of Lisps, Smalltalks, and APLs, Clojure programming is a highly interactive exercise. We converse with the live runtime. Supporting this requires its own kind of tooling.</p>
<figure>
<iframe width="560" height="315" src="https://www.youtube.com/embed/IvTDzKVL58Y?start=1827" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
<p class="footnotes">
Bozhidar Batsov, the author of CIDER demos
<a href="https://www.youtube.com/embed/IvTDzKVL58Y?start=1827">Dark CIDER -
lesser known features for Clojure development</a>.
</p>
</figure>

<p><strong><a href="https://cider.mx/">CIDER</a>:</strong> is <em>"the Clojure(Script) Interactive Development Environment that Rocks!"</em>. Wherever CIDER and clojure-lsp offer similar features, I pick clojure-lsp, only adding what is unique to CIDER, viz.:</p>
<ul>
<li>Enhanced REPL experience and REPL session manager</li>
<li>Value inspector</li>
<li>Interactive Debugger</li>
<li>Profiler (CIDER profiler)</li>
<li>Session tracking (cider-spy + cider-spy-nrepl)</li>
<li>Test runner integration</li>
<li>Minibuffer code evaluation</li>
<li>Macro expansion</li>
<li>Smart namespace reloading</li>
<li>Refactor intelligently with clj-refactor</li>
</ul>
<p>Optionally, I will bring in clj-refactor to patch up corner cases where cider, and lsp-mode may both fall short.</p>
<pre class="elisp"><code>(use-package clojure-mode
  ;; Brings in clojure-mode for Clj, clojurescript-mode for Cljs,
  ;; and clojurec-mode for Cljc
  :ensure t
  ;; Hook into subword-mode to work with CamelCase tokens like Java classes
  ;; h/t suvratapte/dot-emacs-dot-d
  :hook ((clojure-mode . subword-mode)
         (clojure-mode . yas-minor-mode))

  :config
  (setq clojure-indent-style &#39;align-arguments)
  :blackout &quot;Clj&quot;)

(use-package cider
  ;; Note: Ensure CIDER and lsp-mode play well together, as we use both.
  ;; - LSP for more static-analysis-y services (completions, lookups, errors etc.),
  ;; - CIDER for &quot;live&quot; runtime services (enhanced REPL, interactive debugger etc.).
  :ensure t
  :after clojure-mode
  :init
  ;; Use clojure-lsp for eldoc and completions
  ;; h/t cider docs and ericdallo/dotfiles/.config/doom/config.el
  (remove-hook &#39;eldoc-documentation-functions #&#39;cider-eldoc)
  (remove-hook &#39;completion-at-point-functions #&#39;cider-complete-at-point)
  :custom
  (cider-preferred-build-tool &#39;clj)
  :bind
  (:map cider-mode-map
        (&quot;C-c C-l&quot; . nil))
  :config
  ;; settings h/t suvratapte/dot-emacs-dot-d
  (setq cider-repl-pop-to-buffer-on-connect nil
        cider-show-error-buffer t
        cider-auto-select-error-buffer t
        cider-repl-history-file (expand-file-name &quot;cider-history&quot;
                                                  adi/dotemacs-savefile-dir)
        cider-repl-wrap-history t
        cider-prompt-for-symbol nil
        cider-repl-use-pretty-printing t
        nrepl-log-messages nil
        ;; play nice with lsp-mode
        ;; h/t ericdallo/dotfiles/.config/doom/config.el
        cider-font-lock-dynamically nil ; use lsp semantic tokens
        cider-eldoc-display-for-symbol-at-point nil ; use lsp
        cider-prompt-for-symbol nil ; use lsp
        cider-use-xref nil ; use lsp
        ;; Maybe customize variables for cider-jack-in
        ;; https://docs.cider.mx/cider/basics/up_and_running.html
        )
  :blackout)

;; clj-refactor can go where clojure-lsp refactor can&#39;t go
(use-package clj-refactor
  ;; config h/t ericdallo/dotfiles doom emacs config
  :after clojure-mode
  :config
  (setq cljr-warn-on-eval nil
        cljr-eagerly-build-asts-on-startup nil
        cljr-add-ns-to-blank-clj-files nil ; use lsp
        cljr-magic-require-namespaces
        &#39;((&quot;s&quot;   . &quot;schema.core&quot;)
          (&quot;pp&quot; . &quot;clojure.pprint&quot;))))
</code></pre>
<h2 id="clojure-with-org-mode-for-live-demos-and-more">Clojure with org-mode for live demos and more</h2>
<p>As it happens, I do all my conference talks as live demos (What can I say, I like to live dangerously and embrace the demofails :)). The upshot of using org-mode is that I can publish my talks as plaintext org files that others can read or use, as well as static PDF or html files, optionally with in-line "results capture".</p>
<p>Here is one such talk I gave last year, and <a href="../n-ways-to-fizz-buzz-in-clojure/index.html#main">its associated blog post</a>.</p>
<figure>
<iframe width="560" height="315" src="https://www.youtube.com/embed/BTouODWov-A" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
<p class="footnotes">
<a href="https://www.youtube.com/watch?v=BTouODWov-A">n ways to FizzBuzz in Clojure</a> by Yours Truly, at Functional Conf 2022
</p>
</figure>

<div class="sourceCode" id="cb5" data-org-language="emacs-lisp"><pre class="sourceCode commonlisp"><code class="sourceCode commonlisp"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">use-package</span> org</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  :ensure <span class="kw">nil</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  :config</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  (<span class="kw">setq</span> org-export-coding-system <span class="dt">&#39;utf-8</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>        org-babel-clojure-backend <span class="dt">&#39;cider</span>)</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  (org-babel-do-load-languages</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>   <span class="dt">&#39;org-babel-load-languages</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>   &#39;((shell . <span class="kw">t</span>)</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>     (clojure . <span class="kw">t</span>)</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>     (clojurescript . <span class="kw">t</span>)</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>     (sql .<span class="kw">t</span> )</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>     (sqlite . <span class="kw">t</span>)</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>     (plantuml . <span class="kw">t</span>))))</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>(<span class="kw">use-package</span> ob-clojurescript</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>  :blackout)</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>(<span class="kw">use-package</span> org-tree-slide</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>  <span class="co">;; Simple org outline based presentation mode</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>  <span class="co">;; ref: https://github.com/takaxp/org-tree-slide</span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>  :ensure <span class="kw">t</span></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>  :bind ((<span class="st">&quot;&lt;f8&gt;&quot;</span> . <span class="dt">&#39;org-tree-slide-mode</span>)</span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>         (<span class="st">&quot;S-&lt;f8&gt;&quot;</span> . <span class="dt">&#39;org-tree-slide-skip-done-toggle</span>)</span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>         :map org-tree-slide-mode-map</span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>         (<span class="st">&quot;&lt;f9&gt;&quot;</span> . <span class="dt">&#39;org-tree-slide-move-previous-tree</span>)</span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>         (<span class="st">&quot;&lt;f10&gt;&quot;</span> . <span class="dt">&#39;org-tree-slide-move-next-tree</span>)</span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a>         (<span class="st">&quot;&lt;f11&gt;&quot;</span> . <span class="dt">&#39;org-tree-slide-content</span>))</span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a>  :config</span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a>  (<span class="kw">setq</span> org-tree-slide-skip-outline-level <span class="dv">4</span>))</span></code></pre></div>
<h2 id="assist-emacs-with-graphical-interactive-development">Assist Emacs with <em>Graphical</em> Interactive Development</h2>
<p>Clojure programs model the world in terms of composite data structures; hash-maps, vectors, sequences, streams and so forth. <em>And</em> we also access host platform objects, classes, metadata. <em>And</em> we also like to traverse / inspect / visualise any of those entities from different angles, to further our understanding of what's actually going on in the live runtime.</p>
<p>Emacs is great for text UIs (e.g. magit), but not for rich graphical UIs. CIDER affords navigable views into much of this stuff right inside Emacs. <em>And</em> graphical tools like <em>vlaaad</em>'s <a href="https://vlaaad.github.io/reveal/">Reveal</a>, <a href="https://docs.datomic.com/cloud/other-tools/REBL.html">Cognitect REBL</a> by Datomic Team, or Chris Badahdah's browser-based <a href="https://djblue.github.io/portal/">portal</a> data navigator level up our runtime visualisations and interactions to a whole other level.</p>
<figure>
  <iframe width="560" height="315" src="https://www.youtube.com/embed/jq-7aiXPRKs" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
  <div class="footnotes">
    <p>
      <a href="https://www.youtube.com/watch?v=jq-7aiXPRKs">Reveal: Read Eval Visualize Loop</a> by vlaaad
    </p>
    <p><em>
        Reveal is a Clojure REPL with UI that enables data exploration in
        a way never seen before: select printed text and evaluate code
        directly on a value that produced it, build charts only using data,
        explore object fields in debugger-like inspector, easily create views
        that matter to you or your domain. In this talk I'm going to explain
        what is Reveal, why I made it and how to use it.
    </em></p>
  </div>
</figure>

<figure>
  <iframe width="560" height="315" src="https://www.youtube.com/embed/c52QhiXsmyI" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
  <div class="footnotes">
    <p><a href="https://www.youtube.com/embed/c52QhiXsmyI">REBL</a> - Stuart Halloway.
    <p>REBL is a graphical, interactive tool for browsing Clojure data.
      REBL is extracted from Datomic tools developed by the Datomic Team
      at Cognitect.</p>
    <p><a href="https://www.youtube.com/watch?v=ZhzMoEz4j1k">Atom, Chlorine, and Cognitect's REBL</a> is a short demo by Sean Corfield about his day-to-day use of REBL, professionally.</p>
  </div>
</figure>

<figure>
<iframe width="560" height="315" src="https://www.youtube.com/embed/Tj-iyDo3bq0?si=2G_BDhjZrmEDvsu0" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
<div class="footnotes">
<p><a href="https://www.youtube.com/watch?v=Tj-iyDo3bq0">Thinking with Portal</a> - Chris Badahdah.</p>
<p></p>
</div>
</figure>

<h2 id="wire-everything-up-using-clojure-deps-and-cli-tools">Wire everything up using Clojure Deps and CLI tools</h2>
<p>And now, we have to integrate back with our programming ecosystem's build tooling. I have chosen to switch away from <a href="https://github.com/technomancy/leiningen/">Leiningen</a>, to the new-ish CLI tools that come bundled with Clojure these days. From the official <a href="https://clojure.org/guides/deps_and_cli">Deps and CLI Guide</a>:</p>
<blockquote>
<p>Clojure provides command line tools for:</p>
<ul>
<li>Running an <a href="https://clojure.org/guides/repl/introduction">interactive REPL</a> (Read-Eval-Print Loop)</li>
<li>Running Clojure programs</li>
<li>Evaluating Clojure expressions</li>
</ul>
</blockquote>
<p>My Clojure CLI tools invocation looks like this:</p>
<pre class="shell"><code>adi@tardis:~/src/github/adityaathalye/planet_coloniser
\_ (master *% u+1) $ clj -M:dev/cljx
nREPL server started on port 34399 on host localhost - nrepl://localhost:34399
nREPL 1.0.0
Clojure 1.11.1
OpenJDK 64-Bit Server VM 18.0.2-ea+9-Ubuntu-222.04
Interrupt: Control+C
Exit:      Control+D or (exit) or (quit)
user=&gt;
</code></pre>
<p>And below is my global <code>deps.edn</code> configuration that declares an alias I can use to start a development session for any of my full-stack web app projects. This lets our Emacs play well with CIDER middleware, clj-refactor, Reveal etc.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode clojure"><code class="sourceCode clojure"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">;; BASELINE DEVELOPMENT CONFIG</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="co">;;</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="co">;; For use across all projects on my machine.</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co">;;</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="co">;; - Ref. deps configs by Sean Corfield and practicalli, for ideas.</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="co">;;   https://github.com/seancorfield/dot-clojure/blob/develop/deps.edn</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="co">;;   https://github.com/practicalli/clojure-cli-config/blob/main/deps.edn</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="co">;;</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="co">;; - Query deps in various ways:</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="co">;;   $ clj -T:deps aliases # Enumerate aliases across resolved deps files</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a><span class="co">;;   $ clj -X:deps find-versions :lib com.example/lib-name</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a><span class="co">;;</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a><span class="co">;; - Start full-stack web development sessions as:</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a><span class="co">;;   $ clj -M:dev/cljx</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a><span class="co">;;</span></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a><span class="co">;; - Print environment and command parsing info as data</span></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a><span class="co">;;   $ clj -Sdescribe</span></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>{<span class="co">;; Provider attributes</span></span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a> <span class="at">:mvn/repos</span></span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a> {<span class="st">&quot;central&quot;</span> {<span class="at">:url</span> <span class="st">&quot;https://repo1.maven.org/maven2/&quot;</span>}</span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;clojars&quot;</span> {<span class="at">:url</span> <span class="st">&quot;https://repo.clojars.org/&quot;</span>}}</span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a> <span class="co">;; Directories in the current project to include in the classpath.</span></span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a> <span class="at">:paths</span> [<span class="st">&quot;src&quot;</span>] <span class="co">; only the last :paths is kept and others are dropped.</span></span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a> <span class="at">:aliases</span></span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a> {<span class="at">:build</span> <span class="co">;; Building the project for dev or prod.</span></span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a>  <span class="co">;; Override per project, using a :build alias in project&#39;s deps.edn.</span></span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a>  <span class="co">;; This is a useful baseline default.</span></span>
<span id="cb7-31"><a href="#cb7-31" aria-hidden="true" tabindex="-1"></a>  <span class="co">;;</span></span>
<span id="cb7-32"><a href="#cb7-32" aria-hidden="true" tabindex="-1"></a>  <span class="co">;; e.g. `clj -T:build jar` will expect a `jar` function defined in a</span></span>
<span id="cb7-33"><a href="#cb7-33" aria-hidden="true" tabindex="-1"></a>  <span class="co">;; &quot;build.clj&quot; file at the effective classpath &quot;.&quot; (the project root),</span></span>
<span id="cb7-34"><a href="#cb7-34" aria-hidden="true" tabindex="-1"></a>  <span class="co">;; if :paths is not specified for the :build alias. See the tools.build</span></span>
<span id="cb7-35"><a href="#cb7-35" aria-hidden="true" tabindex="-1"></a>  <span class="co">;; guide for an example build.clj file.</span></span>
<span id="cb7-36"><a href="#cb7-36" aria-hidden="true" tabindex="-1"></a>  <span class="co">;;</span></span>
<span id="cb7-37"><a href="#cb7-37" aria-hidden="true" tabindex="-1"></a>  <span class="co">;; ref: https://clojure.org/guides/tools_build</span></span>
<span id="cb7-38"><a href="#cb7-38" aria-hidden="true" tabindex="-1"></a>  {<span class="at">:deps</span> {io.github.clojure/tools.build {<span class="at">:mvn/version</span> <span class="st">&quot;0.9.5&quot;</span>}}</span>
<span id="cb7-39"><a href="#cb7-39" aria-hidden="true" tabindex="-1"></a>   <span class="at">:ns-default</span> build}</span>
<span id="cb7-40"><a href="#cb7-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-41"><a href="#cb7-41" aria-hidden="true" tabindex="-1"></a>  <span class="at">:test</span> <span class="co">;; Testing and debugging tools.</span></span>
<span id="cb7-42"><a href="#cb7-42" aria-hidden="true" tabindex="-1"></a>  <span class="co">;; Override per project, using a :test alias in project&#39;s deps.edn.</span></span>
<span id="cb7-43"><a href="#cb7-43" aria-hidden="true" tabindex="-1"></a>  <span class="co">;; This is a useful baseline default.</span></span>
<span id="cb7-44"><a href="#cb7-44" aria-hidden="true" tabindex="-1"></a>  <span class="co">;; - see https://github.com/cognitect-labs/test-runner</span></span>
<span id="cb7-45"><a href="#cb7-45" aria-hidden="true" tabindex="-1"></a>  <span class="co">;; - run your tests: clj -X:test</span></span>
<span id="cb7-46"><a href="#cb7-46" aria-hidden="true" tabindex="-1"></a>  {<span class="at">:extra-paths</span> [<span class="st">&quot;test&quot;</span>]</span>
<span id="cb7-47"><a href="#cb7-47" aria-hidden="true" tabindex="-1"></a>   <span class="at">:extra-deps</span> {io.github.cognitect-labs/test-runner</span>
<span id="cb7-48"><a href="#cb7-48" aria-hidden="true" tabindex="-1"></a>                {<span class="at">:git/tag</span> <span class="st">&quot;v0.5.1&quot;</span> <span class="at">:git/sha</span> <span class="st">&quot;dfb30dd&quot;</span>}}</span>
<span id="cb7-49"><a href="#cb7-49" aria-hidden="true" tabindex="-1"></a>   <span class="at">:exec-fn</span> cognitect.test-runner.api/test</span>
<span id="cb7-50"><a href="#cb7-50" aria-hidden="true" tabindex="-1"></a>   <span class="at">:main-opts</span> [<span class="st">&quot;-m&quot;</span> <span class="st">&quot;cognitect.test-runner&quot;</span>]}</span>
<span id="cb7-51"><a href="#cb7-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-52"><a href="#cb7-52" aria-hidden="true" tabindex="-1"></a>  <span class="co">;; DEVELOPMENT CONFIGURATION</span></span>
<span id="cb7-53"><a href="#cb7-53" aria-hidden="true" tabindex="-1"></a>  <span class="co">;; - We want to do fullstack development by default</span></span>
<span id="cb7-54"><a href="#cb7-54" aria-hidden="true" tabindex="-1"></a>  <span class="co">;; - Assumes we start a standalone REPL at the terminal, and</span></span>
<span id="cb7-55"><a href="#cb7-55" aria-hidden="true" tabindex="-1"></a>  <span class="co">;;   `cider-connect-clj&amp;cljs` from our Emacs.</span></span>
<span id="cb7-56"><a href="#cb7-56" aria-hidden="true" tabindex="-1"></a>  <span class="co">;; - nb. To prevent figwheel-main auto compiler output from polluting the</span></span>
<span id="cb7-57"><a href="#cb7-57" aria-hidden="true" tabindex="-1"></a>  <span class="co">;;   GUI of vlaaad/reveal, configure figwhell-main&#39;s log level as :error.</span></span>
<span id="cb7-58"><a href="#cb7-58" aria-hidden="true" tabindex="-1"></a>  <span class="co">;; - We set nREPL middleware here instead of global ~/.nrepl/nrepl.edn,</span></span>
<span id="cb7-59"><a href="#cb7-59" aria-hidden="true" tabindex="-1"></a>  <span class="co">;;   or project-specific .nrepl.edn, to avoid splitting related configs</span></span>
<span id="cb7-60"><a href="#cb7-60" aria-hidden="true" tabindex="-1"></a>  <span class="co">;;   in too many places.</span></span>
<span id="cb7-61"><a href="#cb7-61" aria-hidden="true" tabindex="-1"></a>  <span class="co">;;   cf. https://nrepl.org/nrepl/1.0/usage/server.html#server-configuration</span></span>
<span id="cb7-62"><a href="#cb7-62" aria-hidden="true" tabindex="-1"></a>  <span class="at">:dev/cljx</span></span>
<span id="cb7-63"><a href="#cb7-63" aria-hidden="true" tabindex="-1"></a>  {<span class="at">:extra-paths</span> [<span class="st">&quot;src&quot;</span> <span class="st">&quot;resources&quot;</span> <span class="st">&quot;target&quot;</span> <span class="st">&quot;dev&quot;</span> <span class="st">&quot;test&quot;</span>]</span>
<span id="cb7-64"><a href="#cb7-64" aria-hidden="true" tabindex="-1"></a>   <span class="at">:extra-deps</span> {org.clojure/clojure {<span class="at">:mvn/version</span> <span class="st">&quot;1.11.1&quot;</span>}</span>
<span id="cb7-65"><a href="#cb7-65" aria-hidden="true" tabindex="-1"></a>                org.clojure/clojurescript {<span class="at">:mvn/version</span> <span class="st">&quot;1.11.60&quot;</span>}</span>
<span id="cb7-66"><a href="#cb7-66" aria-hidden="true" tabindex="-1"></a>                cider/cider-nrepl {<span class="at">:mvn/version</span> <span class="st">&quot;0.37.0&quot;</span>}</span>
<span id="cb7-67"><a href="#cb7-67" aria-hidden="true" tabindex="-1"></a>                refactor-nrepl/refactor-nrepl {<span class="at">:mvn/version</span> <span class="st">&quot;3.9.0&quot;</span>}</span>
<span id="cb7-68"><a href="#cb7-68" aria-hidden="true" tabindex="-1"></a>                cider/piggieback {<span class="at">:mvn/version</span> <span class="st">&quot;0.5.3&quot;</span>}</span>
<span id="cb7-69"><a href="#cb7-69" aria-hidden="true" tabindex="-1"></a>                com.bhauman/figwheel-main {<span class="at">:mvn/version</span> <span class="st">&quot;0.2.18&quot;</span>}</span>
<span id="cb7-70"><a href="#cb7-70" aria-hidden="true" tabindex="-1"></a>                vlaaad/reveal {<span class="at">:mvn/version</span> <span class="st">&quot;1.3.280&quot;</span>}</span>
<span id="cb7-71"><a href="#cb7-71" aria-hidden="true" tabindex="-1"></a>                <span class="co">;; Suppress spammy jetty server logs emitted by figwheel&#39;s</span></span>
<span id="cb7-72"><a href="#cb7-72" aria-hidden="true" tabindex="-1"></a>                <span class="co">;; development server that powers hot reloading. Bleh.</span></span>
<span id="cb7-73"><a href="#cb7-73" aria-hidden="true" tabindex="-1"></a>                <span class="co">;; c.f. https://github.com/bhauman/flappy-bird-demo-new/blob/master/project.clj</span></span>
<span id="cb7-74"><a href="#cb7-74" aria-hidden="true" tabindex="-1"></a>                org.slf4j/slf4j-nop {<span class="at">:mvn/version</span> <span class="st">&quot;2.0.9&quot;</span>}}</span>
<span id="cb7-75"><a href="#cb7-75" aria-hidden="true" tabindex="-1"></a>   <span class="at">:main-opts</span> [<span class="st">&quot;-m&quot;</span> <span class="st">&quot;nrepl.cmdline&quot;</span></span>
<span id="cb7-76"><a href="#cb7-76" aria-hidden="true" tabindex="-1"></a>               <span class="st">&quot;--middleware&quot;</span></span>
<span id="cb7-77"><a href="#cb7-77" aria-hidden="true" tabindex="-1"></a>               <span class="st">&quot;[cider.nrepl/cider-middleware,refactor-nrepl.middleware/wrap-refactor,cider.piggieback/wrap-cljs-repl,vlaaad.reveal.nrepl/middleware]&quot;</span></span>
<span id="cb7-78"><a href="#cb7-78" aria-hidden="true" tabindex="-1"></a>               <span class="st">&quot;--interactive&quot;</span>]}</span>
<span id="cb7-79"><a href="#cb7-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-80"><a href="#cb7-80" aria-hidden="true" tabindex="-1"></a>  <span class="at">:dev/extras</span></span>
<span id="cb7-81"><a href="#cb7-81" aria-hidden="true" tabindex="-1"></a>  {<span class="at">:extra-deps</span> {org.clojure/test.check {<span class="at">:mvn/version</span> <span class="st">&quot;1.1.1&quot;</span>}</span>
<span id="cb7-82"><a href="#cb7-82" aria-hidden="true" tabindex="-1"></a>                criterium/criterium {<span class="at">:mvn/version</span> <span class="st">&quot;RELEASE&quot;</span>}}}</span>
<span id="cb7-83"><a href="#cb7-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-84"><a href="#cb7-84" aria-hidden="true" tabindex="-1"></a>  <span class="co">;; to run clj-kondo as ad-hoc command line dependency, with tools.deps</span></span>
<span id="cb7-85"><a href="#cb7-85" aria-hidden="true" tabindex="-1"></a>  <span class="co">;; cf. https://github.com/clj-kondo/clj-kondo/blob/master/doc/jvm.md#toolsdepsalpha</span></span>
<span id="cb7-86"><a href="#cb7-86" aria-hidden="true" tabindex="-1"></a>  <span class="co">;; :clj-kondo  {:replace-deps {clj-kondo/clj-kondo {:mvn/version &quot;RELEASE&quot;}}</span></span>
<span id="cb7-87"><a href="#cb7-87" aria-hidden="true" tabindex="-1"></a>  <span class="co">;;              :main-opts [&quot;-m&quot; &quot;clj-kondo.main&quot;]}</span></span>
<span id="cb7-88"><a href="#cb7-88" aria-hidden="true" tabindex="-1"></a>  }}</span></code></pre></div>
<h2 id="add-offline-documentation-browsing">Add offline documentation browsing</h2>
<p>As far as possible, I like to have software documentation available a keystroke away. While Clojure documentation is available in-Emacs, thanks to clojure-lsp, one needs docs for other things like databases or package managers or docker and so forth; things that we use while writing Clojure apps. The awesome <a href="https://kapeli.com/dash">Dash</a> for Mac OS project inspired the <a href="https://zealdocs.org/">Zealdocs</a> project for Linux (which is what I use).</p>
<p>Nifty little <code>zeal-at-point</code> helps integrate Zeal into my dev workflow.</p>
<pre class="elisp"><code>(use-package zeal-at-point
  ;; ref: https://github.com/jinzhu/zeal-at-point
  :bind (:map global-map
              (&quot;\C-c z&quot; . &#39;zeal-at-point)))
</code></pre>
<h1 id="bonus-demos-and-references">Bonus demos and references</h1>
<h2 id="clojure-tooling-evolution">Clojure tooling evolution</h2>
<p><a href="https://www.youtube.com/watch?v=4X-1fJm25Ww">The evolution of the Emacs tooling for Clojure (2014)</a>, Bozhidar Batsov.</p>
<blockquote>
<p>A session dedicated to the evolution of CIDER (the Clojure dev environment for Emacs) and all the new features that have been added since I took over the project exactly one year ago.</p>
</blockquote>
<p>CIDER was already cool circa 2014, and has come a long way since then!</p>
<p><a href="https://www.youtube.com/watch?v=dZ4xczP5zDI">The Future of Clojure Tooling (2018)</a>, Bozhidar Batsov is a nice follow-up to his 2014 talk. By 2018, LSP had arrived and debates about "REPL Powered" <em>versus</em> "Static Analysis Powered" tooling were in the air. We now have the best of both worlds, because even though those world overlap, they are not, in fact, in conflict!</p>
<h2 id="clojurists-like-static-analysis-and-repl-powered-tools">Clojurists like Static Analysis <em>and</em> REPL Powered Tools</h2>
<p>As you have seen so far, both LSP and CIDER enhance our Clojure programming life in Emacs. The fantastic Cursive IDE for IntelliJ is the original model of a seamless static+REPL powered Clojure IDE. If I weren't already invested in Emacs, I would have picked Cursive.</p>
<p><a href="https://www.youtube.com/watch?v=vt1y2FbWQMg">Cursive: A different type of IDE (2014)</a> , Colin Fleming.</p>
<p>In contrast to the majority of Clojure development environments, Cursive uses static analysis of the source code to work its magic rather than taking advantage of the REPL.</p>
<p><a href="https://www.youtube.com/watch?v=ql77RwhcCK0">Debugging Clojure Code With Cursive</a>, Colin Fleming</p>
<p>A very good showcase of a rock-solid debugger and debugging experience. Cursive provides a complete JVM debugger based on the one provided in IntelliJ, including breakpoints, stepping and expression evaluation.</p>
<h2 id="emacs-is-a-first-rate-c-ide-john">Emacs is a first-rate C++ IDE, John</h2>
<p>I feel compelled to include this section because I set up this post by quoting famous C++ developer and a lover of great IDEs, John Carmack.</p>
<p>Even without LSP, Emacs was configurable as a first-rate IDE for large scale codebases: <a href="https://www.youtube.com/watch?v=5FQwQ0QWBTU">CppCon 2015: Emacs as a C++ IDE</a> - Atila Neves.</p>
<p>Now that we <u>have</u> LSP, <a href="https://emacs-lsp.github.io/lsp-mode/tutorials/CPP-guide/">the C++ IDE story is even better</a>!</p>
<h1 id="our-plan-is-complete">Our plan is complete!</h1>
<p>We have come a long way!</p>
<p>All the big pieces are in place, and the general design looks good to me. I will add enhancements, and fix bad ideas and bugs as I go along.</p>
<ul>
<li>[✓] Set the very preliminaries.</li>
<li>[✓] Set up package management. I'll probably stick with the old familiars; elpa and melpa. I'm not sure about straight.el at this time.</li>
<li>[✓] Choose <code>use-package</code> to get and configure each package. I like how neat configs are, when defined with use-package.</li>
<li>[✓] Unexpectedly refactor the whole thing.</li>
<li>[✓] Make completions and "getting about" work (the right mix of ivy, consul, swiper, company, helm, imenu). Someone mentioned newer alternatives to helm. Have a look at that.</li>
<li>[✓] Fix general text editing stuff (keybindings, multiple cursors, snippets etc.)</li>
<li>[✓] Add support for favourite programming languages.
<ul>
<li>[✓] Emacs Lisp (built-in + smartparens, eldoc etc.)</li>
<li>[✓] Clojure (clojure-mode, clojure-lsp, CIDER, and lispy editing packages)</li>
<li>[✓] Bash (lsp-bash)</li>
<li>Others will be configured on an as-needed basis.</li>
</ul></li>
<li>[✓] org-mode specifics that suit <a href="../why-and-how-i-use-org-mode/index.html#main">how I use org</a>
<ul>
<li>[✓] org-babel (currently for Clojure, elisp, shell, SQL and some other langs)</li>
<li>[✓] tree-slide for presentations</li>
</ul></li>
<li>then let's see…</li>
</ul>
<p>This was educational, fun, satisfying, and useful.</p>
<p>I <a href="https://github.com/adityaathalye/dotemacs">published it</a>, and call it done (for now)!</p>
<pre class="shell"><code># https://github.com/adityaathalye/dotemacs
ln -s ~/src/github/adityaathalye/dotemacs ~/.emacs.d
</code></pre>
<h1 id="footnotes">Footnotes</h1>
<aside id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr />
<ol>
<li id="fn1"><p>The opening screenshot shows my Clojure programming session. Emacs occupies the left vertical half. <em><a href="https://vlaaad.github.io/reveal/">Reveal</a></em>, a separate graphical data inspector (unrelated to reveal.js), occupies the right half of my monitor.</p>
<ul>
<li><p><strong>In the Emacs session</strong>, the lower half has documentation I pulled up using lsp-mode, and the upper part has Clojure code, with a lsp-ui overlay of a "find references" action I executed via lsp-mode.</p></li>
<li><p><strong>In the Reveal GUI session</strong>, I have a navigable, interactive view of the result of code I evaluated from Emacs, into the live REPL. Reveal captured this for me because it taps into a shared REPL session.</p></li>
<li><p><strong>Both Emacs and Reveal connect to the <em>same</em> Clojure REPL session</strong>, over an nREPL server socket. That is because I started them together, at the root of the Clojure project, like so:</p>
<pre class="shell"><code>adi@tardis:~/src/github/adityaathalye/planet_coloniser
\_$ clj -M:dev/base:repl/clj:repl/reveal
nREPL server started on port 34139 on host localhost - nrepl://localhost:34139
nREPL 1.0.0
Clojure 1.10.3
OpenJDK 64-Bit Server VM 18.0.2-ea+9-Ubuntu-222.04
Interrupt: Control+C
Exit:      Control+D or (exit) or (quit)
user=&gt;
</code></pre></li>
</ul>
<a href="#fnref1" target="_self" class="footnote-back" role="doc-backlink">↩︎</a></li>
<li id="fn2"><p>Yes, colour me skeptical. I think the A.I. tools are cool, but I value thinking about problems and design far more than banging out swaths of code. Less code is better code. The only way I know how to do that is by doing good design, paired with ruthless testing and refactoring — not just of code, but of mental models. So I will conserve my enthusiasm until the AI can help produce + factor kickass software architecture and design.<a href="#fnref2" target="_self" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>And for some people, like m'esteemed colleague, gentleman and scholar, <a href="https://vedang.me/">Vedang</a>, <a href="https://www.youtube.com/watch?v=KZoQ4EkfDPo">their entire life</a>. Few editors can lay claim to this kind of all-integrating integration. Vim, in its text editorial way, also answers to this charge, though I contend the Emacs life is harder to escape from :)<a href="#fnref3" target="_self" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p><a href="https://blog.janestreet.com/putting-the-i-back-in-ide-towards-a-github-explorer/">Putting the I back in IDE: Towards a Github Explorer</a> - Jane Street blog.<a href="#fnref4" target="_self" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p>This, I think, is the little secret worth noticing. We <em>do not</em> really learn <strong>an</strong> editor, we learn <strong>a way</strong> (or ways) of working. So any editor that supports our "way" can be our editor. Personally, I chose to learn enough Emacs and Vim to be dangerous. And I hereby profess that all teh editorz r mine.<a href="#fnref5" target="_self" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6"><p>I for one certainly can, by fixing my rather poor use of tools like debuggers, profiles, static analysers etc.<a href="#fnref6" target="_self" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn7"><p>Frequently, new programming languages will gain a major-mode very early in the life of said language (often approximate, but <em>useful</em>). Whereas some programming languages never get good support because their language tools and/or infrastructure remains proprietary, preventing deep and thorough understanding of the language. In those cases, it is pragmatic to use the proprietary IDE, if we must (<a href="#what-does-integrated-mean">but do it our way</a>).<a href="#fnref7" target="_self" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn8"><p><a href="https://microsoft.github.io/language-server-protocol/overviews/lsp/overview/">What is the Language Server Protocol?</a></p>
<blockquote>
<p>Implementing support for features like autocomplete, goto definition, or documentation on hover for a programming language is a significant effort. Traditionally this work must be repeated for each development tool, as each provides different APIs for implementing the same features.</p>
<p>The idea behind a Language Server is to provide the language-specific smarts inside a server that can communicate with development tooling over a protocol that enables inter-process communication.</p>
<p>The idea behind the Language Server Protocol (LSP) is to standardize the protocol for how tools and servers communicate, so a single Language Server can be re-used in multiple development tools, and tools can support languages with minimal effort.</p>
<p>LSP is a win for both language providers and tooling vendors!</p>
</blockquote>
<a href="#fnref8" target="_self" class="footnote-back" role="doc-backlink">↩︎</a></li>
</ol>
</aside>
  </section>
  <footer id="blog-post-footer" class="footer">
    <p><hr></p>
    <nav class="cluster">
      <span>&uarr; <a href="#blog-post-toc" rel="bookmark" target="_self">toc</a></span>
      <span>&uarr; <a href="#blog-post" rel="bookmark" target="_self">title</a></span>
      <span>&uarr; <a href="#site-header" rel="bookmark" target="_self">menu</a></span>
    </nav>
    <p><hr></p>
          <nav class="cluster">
        <a href="mailto:blog.comments@evalapply.org?subject=DELETE_ME_HUMAN Emerging from dotemacs bankruptcy the hard way: integrating the IDE (fea" rel="bookmark">&#x2709; email me comments</a>
        <span>&raquo; share &rarr;</span>
        <a href="https://bsky.app/intent/compose?text=Emerging%20from%20dotemacs%20bankruptcy%20the%20hard%20way%3A%20integrating%20the%20IDE%20%28feat.%20Clojure%28Script%29%29%20https%3A%2F%2Fwww.evalapply.org%2Fposts%2Femerging-from-dotemacs-bankruptcy-ide-experience%2Findex.html" target="_blank">[bsky]</a>
        <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fwww.evalapply.org%2Fposts%2Femerging-from-dotemacs-bankruptcy-ide-experience%2Findex.html" target="_blank">[in]</a>
        <a href="https://news.ycombinator.com/submitlink?u=https%3A%2F%2Fwww.evalapply.org%2Fposts%2Femerging-from-dotemacs-bankruptcy-ide-experience%2Findex.html&t=Emerging%20from%20dotemacs%20bankruptcy%20the%20hard%20way%3A%20integrating%20the%20IDE%20%28feat.%20Clojure%28Script%29%29" target="_blank"> [HN]</a>
        <a href="https://lobste.rs/stories/new" target="_blank">[lobste.rs]</a>
        <a href="http://www.reddit.com/submit?url=https%3A%2F%2Fwww.evalapply.org%2Fposts%2Femerging-from-dotemacs-bankruptcy-ide-experience%2Findex.html&title=Emerging%20from%20dotemacs%20bankruptcy%20the%20hard%20way%3A%20integrating%20the%20IDE%20%28feat.%20Clojure%28Script%29%29" target="_blank">[reddit]</a>
        <a class="site-feed" href="https://www.evalapply.org/index.xml" target="_blank">feed</a>
      </nav>
    <form
  class="footer cluster"
  action="https://buttondown.com/api/emails/embed-subscribe/evalapply"
  method="post"
  target="popupwindow"
  onsubmit="window.open('https://buttondown.com/evalapply', 'popupwindow')"
  >
  <input type="email" name="email" id="bd-email" />
  <span>
    <input type="submit" value="Get posts by email" />
    <input type="hidden" name="tag" value="everyone" />
<input type="hidden" name="tag" value="via-blog-post" />
  </span>
</form>
  </footer>
</article>
  </main>
      <footer id="site-footer">
  <hr>
  <div class="box invert footer stack">
    <p>&copy; 2025,
      <a href="https://www.linkedin.com/in/adityaathalye/" target="_blank">Aditya Athalye</a>.
      <span>All content licensed
        <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/" target="_blank">
          CC BY-SA 4.0
        </a>, except where noted otherwise.
      </span>
      Built with
      <a href="https://github.com/adityaathalye/shite" target="_blank">shite</a>.
      Newsletter <a href="https://buttondown.com/refer/evalapply" target="_blank">Powered by Buttondown</a>.
    </p>
    <div class="rc-scout-wrapper">
      <div class="rc-scout" data-scout-rendered="true">
        <p class="rc-scout__text">
          <i class="rc-scout__logo"></i>
          Want to become a better programmer?
          <a class="rc-scout__link" href="https://www.recurse.com/scout/click?t=40533398b8c93bb4f3323a170e032e91" target="_blank">Join the Recurse Center!</a>
        </p>
      </div>
      <style class="rc-scout__style" type="text/css">.rc-scout { display: block; padding: 0; border: 0; margin: 0; } .rc-scout__text { display: block; padding: 0; border: 0; margin: 0; height: 100%; font-size: 100%; } .rc-scout__logo { display: inline-block; padding: 0; border: 0; margin: 0; width: 0.85em; height: 0.85em; background: no-repeat center url('data:image/svg+xml;utf8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2012%2015%22%3E%3Crect%20x%3D%220%22%20y%3D%220%22%20width%3D%2212%22%20height%3D%2210%22%20fill%3D%22%23000%22%3E%3C%2Frect%3E%3Crect%20x%3D%221%22%20y%3D%221%22%20width%3D%2210%22%20height%3D%228%22%20fill%3D%22%23fff%22%3E%3C%2Frect%3E%3Crect%20x%3D%222%22%20y%3D%222%22%20width%3D%228%22%20height%3D%226%22%20fill%3D%22%23000%22%3E%3C%2Frect%3E%3Crect%20x%3D%222%22%20y%3D%223%22%20width%3D%221%22%20height%3D%221%22%20fill%3D%22%233dc06c%22%3E%3C%2Frect%3E%3Crect%20x%3D%224%22%20y%3D%223%22%20width%3D%221%22%20height%3D%221%22%20fill%3D%22%233dc06c%22%3E%3C%2Frect%3E%3Crect%20x%3D%226%22%20y%3D%223%22%20width%3D%221%22%20height%3D%221%22%20fill%3D%22%233dc06c%22%3E%3C%2Frect%3E%3Crect%20x%3D%223%22%20y%3D%225%22%20width%3D%222%22%20height%3D%221%22%20fill%3D%22%233dc06c%22%3E%3C%2Frect%3E%3Crect%20x%3D%226%22%20y%3D%225%22%20width%3D%222%22%20height%3D%221%22%20fill%3D%22%233dc06c%22%3E%3C%2Frect%3E%3Crect%20x%3D%224%22%20y%3D%229%22%20width%3D%224%22%20height%3D%223%22%20fill%3D%22%23000%22%3E%3C%2Frect%3E%3Crect%20x%3D%221%22%20y%3D%2211%22%20width%3D%2210%22%20height%3D%224%22%20fill%3D%22%23000%22%3E%3C%2Frect%3E%3Crect%20x%3D%220%22%20y%3D%2212%22%20width%3D%2212%22%20height%3D%223%22%20fill%3D%22%23000%22%3E%3C%2Frect%3E%3Crect%20x%3D%222%22%20y%3D%2213%22%20width%3D%221%22%20height%3D%221%22%20fill%3D%22%23fff%22%3E%3C%2Frect%3E%3Crect%20x%3D%223%22%20y%3D%2212%22%20width%3D%221%22%20height%3D%221%22%20fill%3D%22%23fff%22%3E%3C%2Frect%3E%3Crect%20x%3D%224%22%20y%3D%2213%22%20width%3D%221%22%20height%3D%221%22%20fill%3D%22%23fff%22%3E%3C%2Frect%3E%3Crect%20x%3D%225%22%20y%3D%2212%22%20width%3D%221%22%20height%3D%221%22%20fill%3D%22%23fff%22%3E%3C%2Frect%3E%3Crect%20x%3D%226%22%20y%3D%2213%22%20width%3D%221%22%20height%3D%221%22%20fill%3D%22%23fff%22%3E%3C%2Frect%3E%3Crect%20x%3D%227%22%20y%3D%2212%22%20width%3D%221%22%20height%3D%221%22%20fill%3D%22%23fff%22%3E%3C%2Frect%3E%3Crect%20x%3D%228%22%20y%3D%2213%22%20width%3D%221%22%20height%3D%221%22%20fill%3D%22%23fff%22%3E%3C%2Frect%3E%3Crect%20x%3D%229%22%20y%3D%2212%22%20width%3D%221%22%20height%3D%221%22%20fill%3D%22%23fff%22%3E%3C%2Frect%3E%3C%2Fsvg%3E'); } .rc-scout__link:link, .rc-scout__link:visited { color: #3dc06c; text-decoration: underline; } .rc-scout__link:hover, .rc-scout__link:active { color: #4e8b1d; }
      </style>
    </div>
  </div>
</footer>
    </div>
  </body>
</html>
