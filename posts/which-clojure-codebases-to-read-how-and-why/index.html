<!DOCTYPE html>
<html lang="en" prefix="og: https://ogp.me/ns#">
  <head>
    <!-- Some basic hygiene meta-data -->
<title>Which Clojure codebases should I read? How and why?</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="author" content="Aditya Athalye">
<meta name="description"
      content="Newcomers to Clojure so frequently ask this question that an FAQ/Guide is being discussed, to add to the Clojure website. I struggled a lot with the question too, when starting off in Clojureland. Here are my notes and opinions.">
<meta name="keywords" content="systems thinking,functional programming,architecture,software design,technology leadership,devops,clojure">
<meta property="og:title" content="Which Clojure codebases should I read? How and why?">
<meta property="og:description" content="Newcomers to Clojure so frequently ask this question that an FAQ/Guide is being discussed, to add to the Clojure website. I struggled a lot with the question too, when starting off in Clojureland. Here are my notes and opinions.">
<meta property="og:locale" content="en_GB">
<meta property="og:type" content="website">
<meta property="og:url" content="https://evalapply.org/posts/which-clojure-codebases-to-read-how-and-why/index.html">
    <link rel="stylesheet preload" type="text/css" as="style" href="https://evalapply.org/static/css/style.css">
<link href="https://evalapply.org/index.xml"
      rel="alternate" type="application/rss+xml"
      title="Eval / Apply is pure magic">
<link rel="canonical" href="https://evalapply.org/posts/which-clojure-codebases-to-read-how-and-why/index.html">
</head>
  <body>
    <div id="the-very-top" class="stack center box">
        <header id="site-header">
  <div class="box invert stack">
    <div class="with-sidebar site-header">
      <a class="box icon" href="https://evalapply.org/index.html#main">
        <img src="https://evalapply.org/static/img/Lisp_logo.svg" alt="Eval / Apply is pure magic">
      </a>
      <div class="stack">
        <div class="site-header site-header:title">Eval / Apply is pure magic</div>
        <nav class="cluster site-header site-header:nav-items">
          <a href="https://evalapply.org/index.html#main">
   &lambda; about
</a>
<a href="https://evalapply.org/posts/index.html">
   &#9753; blog
</a>
<a href="mailto:hello@evalapply.org">
   email
</a>
<a href="#site-footer">
   &rlhar; subscribe
</a>
        </nav>
      </div>
    </div>
  </div>
</header>
        <main id="main">
          <article id="blog-post" class="stack">
  <header>
    <div class="stack">
      <div class="title">Which Clojure codebases should I read? How and why?</div>
      <div class="cluster post-meta">
           <span>&uarr; <a href="#site-header" rel="bookmark">menu</a></span>
           <span>&darr; <a href="#blog-post-footer" rel="bookmark">discuss</a></span>
           <span>&darr; <a href="#blog-post-toc" rel="bookmark">toc</a></span>
      </div>
      <div class="summary">Newcomers to Clojure so frequently ask this question that an FAQ/Guide is being discussed, to add to the Clojure website. I struggled a lot with the question too, when starting off in Clojureland. Here are my notes and opinions.</div>
      <div class="cluster post-meta">
        <span class="author">By: Adi</span>
        <span class="date">Published: 2022-04-29</span>
        <span class="date">Updated: 2022-11-08</span>
        <span class="tags">Tags:  / <a href="https://evalapply.org/tags/clojure/index.html#main">#clojure</a> / <a href="https://evalapply.org/tags/howto/index.html#main">#howto</a> / <a href="https://evalapply.org/tags/whyto/index.html#main">#whyto</a>
        </span>
      </div>
      <hr>
    </div>
  </header>
  <section class="stack">
      <div id="blog-post-toc" class="stack table-of-contents">
  <details class="box invert stack" open>
    <summary>
      <strong>Contents</strong>
    </summary>
    <nav class="stack">
      <a href="#a-quick-motivating-example" class="toc-heading:h1">A quick motivating example</a>
<a href="#heuristics-to-choose-a-project-to-read" class="toc-heading:h1">Heuristics to choose a project to read</a>
<a href="#choosing-an-area-of-domain-knowledge" class="toc-heading:h2">Choosing an area of domain knowledge</a>
<a href="#project-type" class="toc-heading:h2">Project type</a>
<a href="#code-size" class="toc-heading:h2">Code size</a>
<a href="#code-complexity" class="toc-heading:h2">Code complexity</a>
<a href="#utility" class="toc-heading:h2">Utility</a>
<a href="#talks-docs-tutorials" class="toc-heading:h2">Talks, docs, tutorials</a>
<a href="#beware-the-falsehood-of-dead-repos" class="toc-heading:h2">Beware the falsehood of "dead" repos</a>
<a href="#effective-ways-to-read-a-project" class="toc-heading:h1">Effective way(s) to read a project</a>
<a href="#read-the-readme-and-api-docs" class="toc-heading:h2">Read the README and API docs</a>
<a href="#use-the-repl" class="toc-heading:h2">Use the REPL</a>
<a href="#learn-to-navigate-the-code" class="toc-heading:h2">Learn to navigate the code</a>
<a href="#experiment" class="toc-heading:h2"><em>Experiment</em></a>
<a href="#comparitive-literature-approach" class="toc-heading:h2">"Comparitive Literature" approach</a>
<a href="#alt-implementation" class="toc-heading:h2">Alt-implementation</a>
<a href="#suggested-projects-with-short-reasons-why-to-read" class="toc-heading:h1">Suggested projects with short reasons why to read</a>
<a href="#webhtmlcss" class="toc-heading:h2">web/HTML/CSS</a>
<a href="#webhttp" class="toc-heading:h2">web/HTTP</a>
<a href="#clojure-itself" class="toc-heading:h2">Clojure itself</a>
<a href="#database-queries" class="toc-heading:h2">Database queries</a>
<a href="#music-maker" class="toc-heading:h2">Music maker</a>
<a href="#system-startstop-thingy" class="toc-heading:h2">"System" start/stop thingy</a>
<a href="#app-configuration-thingy" class="toc-heading:h2">App configuration thingy</a>
<a href="#applications-designed-for-copy-and-hack" class="toc-heading:h2">Applications designed for "copy-and-hack"</a>
<a href="#large-scale-repos" class="toc-heading:h2">Large-scale repos</a>
<a href="#library-maintainers-would-howtoreadmes-make-sense" class="toc-heading:h1">Library maintainers: Would HOWTOREADMEs make sense?</a>
    </nav>
  </details>
</div>
<hr>
  <p>Newcomers to Clojure so frequently ask this question that an FAQ/Guide is being discussed, to add to the Clojure website. See Issue #586: <a href="https://github.com/clojure/clojure-site/issues/586">Add FAQ or guide for example projects</a>. Please add your thoughts to that ticket!</p>
<p>This post is my (opinionated) take on it. I struggled a lot with this too. I still do from time to time, in unfamiliar territory, and these days I feel like I'm in unfamiliar territory a lot. Various Clojurians — individuals and groups — have been producing so much creative, diverse work over these last few years that keeping up quickly became impossible!</p>
<p>No doubt this surfeit of creativity intimidates newcomers. The strange ideas, lingo, thinking, and writing espoused by Clojurians can seem so very alien. But despair not, for Clojureland also has a surfeit of friendly, helpful people. And very many of our codebases are small! You will be able to read them! And get help if you get stuck!</p>
<p>This post explains what I believe I've done subconsciously over the years. It is as much an answer for somewhat experienced me as it is for the relative newcomer you!</p>
<h1 id="a-quick-motivating-example">A quick motivating example</h1>
<p>I haven't done much focused code reading recently, but semi-recently, I went down the rabbit hole of comparing "System" libraries. The details are for a separate blog post. I've placed it here as reference material to illustrate some of this post.</p>
<p><a href="https://github.com/adityaathalye/slideware/raw/master/Grokking%20Libraries%20in%20Clojureland.pdf">Grokking Libraries in Clojureland</a> (PDF, slides).</p>
<h1 id="heuristics-to-choose-a-project-to-read">Heuristics to choose a project to read</h1>
<p>This kind of code reading is best viewed as applied, directed reading designed to deeply understand creative (and destructive) ways to use an instrument, in this case, Clojure the language, its standard library, idioms, patterns, and style.</p>
<p>The key problem here is "you don't know what you don't know". Coming up with a set of heuristics can help discover good choices. In fact, one can make a decision-making matrix of #{libraries} X #{heuristics}, like so:</p>
<table>
<thead>
<tr class="header">
<th>Heuristic / Library</th>
<th>Lib A</th>
<th>Lib B</th>
<th>Lib C</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Code size (LoC)</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>Code complexity (high/mid/low)</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>Utility</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>Stability (high, mid, low)</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>Docs</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>Talks</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>Tutorials</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>…</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>It also helps to decide a domain or area of knowledge (web/HTML, web/HTTP, algorave, databases etc.), before drawing up the decision-making matrix.</p>
<p>Here is a set of opinions and heuristics to steal and/or riff off.</p>
<h2 id="choosing-an-area-of-domain-knowledge">Choosing an area of domain knowledge</h2>
<p>Knowledge about a domain or problem space is a source of massive cognitive overhead. It helps a lot to pick an area of knowledge you feel you are most comfortable with, and narrow your code search and reading to that area.</p>
<p>For example, web programmers may want to read an HTTP library. Musicians may want to find a music synthesis codebase. Frontend people many like to read HTML / CSS parsers or generators. Database nerds may want to know how we do stuff without fancy ORMs etc.</p>
<h2 id="project-type">Project type</h2>
<p>Choose single-purpose libraries. The Clojure world is full of libraries of various sizes and responsibilities. Most of these tend to focus very sharply on one single problem, which makes it easier to build and retain complete context in one's head. These tend to be good place to start.</p>
<p>Application code, by contrast, tends to be a complex (or complected) mix of domains, patterns, libraries. This makes it easy to get lost.</p>
<p>Further, there is no one true way to organise Clojure apps. Often, apps don't even mirror standard conventions seen elsewhere (e.g. MVC/MVCC etc.). Clojure apps are assemblies of libraries, where each library choice comes with some technical and/or design tradeoff. Further, build tools vary. App configuration systems vary. etc. etc. many tens of moving parts.</p>
<p>One eventually develops a sense for it all, but most of it is completely not obvious when one is just starting off. It makes way-finding really hard. You will spend lots of time just to figure out how some app is wired together.</p>
<p>So it's better to subtract everything until you are left with a singular idea and its expression. That is, often, a single-purpose library!</p>
<h2 id="code-size">Code size</h2>
<p>Prefer libraries with as few lines of code as possible. The good news is that Clojure libraries tend to focus on a single well-defined problem, which tends to result in small <em>and complete</em> solutions to problems. Many excellent Clojure libraries weigh in at under 1,000 LoC.</p>
<p>With some effort, you can hope to hold the entire codebase in your head. Once that happens, your brain will discover things in diffuse mode in your shower or on a walk or something. And then you know you've struck gold!</p>
<h2 id="code-complexity">Code complexity</h2>
<p>Even if a library is small, it may be complex, because it address a hard problem. This is tricky to infer up-front, and that's fine. Getting stuck is part of the process. One mitigation is to skim-read the source first. If you see very deeply indented code, or lots of large functions, or lots of macros, maybe park it for later. Definitely prefer libraries without advanced macrology (unless your purpose is to understand advanced macrology :).</p>
<h2 id="utility">Utility</h2>
<p>How much is the library used? A well-used library may be widely used, or it may be niche but heavily used. Either way, odds are good that the source has been vetted. Also it improves your chances of finding help if you get stuck.</p>
<p>Some proxy measures like github stars, a dedicated channel in Slack or Zulip, or references in mailing list history can help judge this. If you are still uncertain, just drop a message in one of the community forums. Helpful people will help!</p>
<h2 id="talks-docs-tutorials">Talks, docs, tutorials</h2>
<p>Are talks, docs, and tutorials available for the library, or at least the space the library addresses? The code often does not tell the full story of the "why?" of the library, the roads not taken or choices unmade. Code also tends not to convey the author's mental process. This is the highest value learning that comes from reading; viz. learning a new way to think. So knowing what knowledgeable people have been saying about the space/code is very useful.</p>
<h2 id="beware-the-falsehood-of-dead-repos">Beware the falsehood of "dead" repos</h2>
<p>Many in-use Clojure libraries don't see frequent (or large) updates. This is a virtue in our circles. It indicates finished-ness and stability. In fact, if you find a repo with no commits for months or years, and a "liveness advisory" on it, you <em>definitely</em> want to read that code. That code has proven itself handsomely!</p>
<h1 id="effective-ways-to-read-a-project">Effective way(s) to read a project</h1>
<p>This is basically a set of ways to <em>engage</em> with the material. The programmer equivalent of textbook underlining, marginalia, scribbling notes and diagrams.</p>
<h2 id="read-the-readme-and-api-docs">Read the README and API docs</h2>
<p>And keep them handy. Ideally figure out the <em>why</em> of the project before getting into the weeds, because weeds there will be.</p>
<h2 id="use-the-repl">Use the REPL</h2>
<p>I habitually use <code>clojure.repl/source</code>, to pull up source code for functions that are new to me.</p>
<h2 id="learn-to-navigate-the-code">Learn to navigate the code</h2>
<p>Find editor functions that let you see an overview of a namespace, jump to and fro from definitions.</p>
<h2 id="experiment"><em>Experiment</em></h2>
<p>IMHO it is critical to <em>experiment</em> with the code. Passive reading gets us only so far. To truly grok code one must modify and play with it! This is where one thanks oneself for choosing a focused, concise project :)</p>
<h2 id="comparitive-literature-approach">"Comparitive Literature" approach</h2>
<p>Preferably find a space where multiple libraries exist. As long as one well used library is present, it is fine if unused ones exist too. Frequently contemporary libraries aim to overcome walls their classic brethren hit, or are novel approaches to the same problem that offer a different set of tradeoffs v/s the classics.</p>
<p>There is much to learn from bygone classics, but only after one works through the contemporary stuff, and has several "Wait, but why?" moments.</p>
<h2 id="alt-implementation">Alt-implementation</h2>
<p>The Black Belt move is to combine experimentation and comparative lit. and try to hack up your own alternate implementation, by purposely taking a completely different approach to representing the problem space, as compared to the library under study.</p>
<h1 id="suggested-projects-with-short-reasons-why-to-read">Suggested projects with short reasons why to read</h1>
<p>This is a first-cut top-of-mind list, from the top of <em>my</em> chaotic mind. Take with a pinch of salt!</p>
<p>Cross-reference with <a href="https://github.com/clojure/clojure-site/issues/586">this discussion</a> where folks are trying to figure out what projects to suggest, how, and why, as part of an FAQ or a Guide at the official Clojure website.</p>
<h2 id="webhtmlcss">web/HTML/CSS</h2>
<ul>
<li><strong><a href="https://github.com/weavejester/hiccup">weavejester/hiccup</a></strong> to understand a natural translation of one domain (HTML) to Clojure data. Writing HTML as Clojure data is what we mean when we say "well, it's just data" or "data DSL".</li>
<li><strong><a href="https://github.com/noprompt/garden">noprompt/garden</a></strong> which does unto CSS what Hiccup does unto HTML.</li>
</ul>
<h2 id="webhttp">web/HTTP</h2>
<ul>
<li><strong><a href="https://github.com/ring-clojure/ring">Ring</a></strong>, to understand one of the most popular HTTP server abstractions in the Clojureverse.</li>
</ul>
<h2 id="clojure-itself">Clojure itself</h2>
<ul>
<li><strong><a href="https://github.com/clojure/clojure/blob/master/src/clj/clojure/test.clj">Clojure.test</a></strong> which is the built-in testing framework, in a surprisingly small amount of code. Also, incidentally, to start feeling OK diving into Clojure's own source.</li>
</ul>
<h2 id="database-queries">Database queries</h2>
<ul>
<li><strong><a href="https://github.com/seancorfield/honeysql">honeysql</a></strong> to grok a way to represent the Domain of SQL queries as Clojure data.</li>
</ul>
<h2 id="music-maker">Music maker</h2>
<p>There's lots out there that I don't know of, but…</p>
<ul>
<li><a href="https://github.com/overtone/overtone">overtone/overtone</a>, but it is a big project</li>
<li><a href="https://github.com/ssrihari/ragavardhini">ssrihari/ragavardhini</a> is smaller</li>
</ul>
<h2 id="system-startstop-thingy">"System" start/stop thingy</h2>
<ul>
<li><strong><a href="https://github.com/stuartsierra/component">stuartsierra/component</a></strong> "Managed lifecycle of stateful objects in Clojure".</li>
</ul>
<h2 id="app-configuration-thingy">App configuration thingy</h2>
<ul>
<li><strong><a href="https://github.com/juxt/aero">juxt/aero</a></strong> "A small library for explicit, intentful configuration."</li>
</ul>
<h2 id="applications-designed-for-copy-and-hack">Applications designed for "copy-and-hack"</h2>
<p>As <a href="https://github.com/puredanger"><span class="citation" data-cites="puredanger">@puredanger</span></a> and <a href="https://github.com/plexus"><span class="citation" data-cites="plexus">@plexus</span></a> have <a href="https://github.com/clojure/clojure-site/issues/586">written here</a>: If you're wondering "what's something similar I can copy and hack on" or "what does a real project look like"?</p>
<ul>
<li><a href="https://github.com/seancorfield/usermanager-example">seancorfield/usermanager-example</a></li>
<li><a href="https://github.com/clojureverse/clojurians-log-app">clojureverse/clojurians-log-app</a></li>
</ul>
<h2 id="large-scale-repos">Large-scale repos</h2>
<ul>
<li><a href="https://github.com/nasa/Common-Metadata-Repository">NASA's Common Metadata Repository</a> project, just to have one's mind blown :D</li>
</ul>
<h1 id="library-maintainers-would-howtoreadmes-make-sense">Library maintainers: Would HOWTOREADMEs make sense?</h1>
<p>Hi! First, thank you for your library work! I'm just thinking aloud here…</p>
<p>Suppose Clojure library authors write little reading guides for their projects; <strong>"How to read me"s</strong>? Maybe a paragraph or two that provides context like:</p>
<ul>
<li>Suggested entry point and Meta-dot pathway</li>
<li>The most important namespace(s)</li>
<li>Interesting functions</li>
<li>Tests or Rich comments to try out on priority</li>
<li>Any known hairy-scary bits or gotchas</li>
<li>Perhaps a line or two suggesting "compare with Alternate Libs A, B, C"</li>
<li>etc.</li>
</ul>
<p>A reader may fruitfully combine this guidance with information about project purpose, rationale, and any open issues marked "beginner" etc.</p>
  </section>
  <footer id="blog-post-footer" class="footer">
    <nav class="cluster">
      <span>&uarr; <a href="#blog-post" rel="bookmark">title</a></span>
      <span>&uarr; <a href="#site-header" rel="bookmark">menu</a></span>
      <span>&rarr; <a href="mailto:weblog@evalapply.org">email comments</a></span>
    </nav>
  </footer>
</article>
        </main>
        <footer id="site-footer">
<hr>
<div class="box invert footer stack">
  <div class="cluster">
    <span>&#128231; : <a href="mailto:hello@evalapply.org">hello@evalapply.org</a></span>
    <a class="site-feed"
       href="https://evalapply.org/index.xml">
       Blog feed
    </a>
    <form class="cluster"
          action="https://buttondown.email/api/emails/embed-subscribe/evalapply"
          method="post" target="popupwindow"
          onsubmit="window.open('https://buttondown.email/evalapply','popupwindow')">
        <input type="email" name="email" id="bd-email">
      <span>
        <input type="submit" value="Get occasional newsletter">
        <em>(thanks, <a href="https://buttondown.email" target="_blank">Buttondown</a>!)</em>
      </span>
    </form>
  </div>
  <hr>
  <p>&copy; copyright 2023, <a href="https://evalapply.org" target="_blank">Aditya Athalye</a>.
    <span>Except where otherwise noted, content on this site is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">
    Creative Commons Attribution-ShareAlike 4.0 International License
    </a>, the same one used by Wikipedia.</span>
<span><a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">
    <img alt="Creative Commons License" style="border-width:0"
         src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png">
    </a></span>
  </p>
  <hr>
  <p> Made with
      <a href="https://www.gnu.org/software/emacs/">GNU Emacs</a>,
      <a href="https://orgmode.org/">org-mode</a>, and
      <a href="https://github.com/adityaathalye/shite">shite</a>.
  </p>
  <p id="recurse-scout">
  <script async defer src="https://www.recurse-scout.com/loader.js?t=40533398b8c93bb4f3323a170e032e91"></script>
  </p>
</div>
</footer>
    </div>
  </body>
</html>
