<!DOCTYPE html>
<html lang="en" prefix="og: https://ogp.me/ns#">
  <head>
    <!-- Some basic hygiene meta-data -->
<title>Poor man&apos;s Reader App with Pandoc &amp; Bash</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="author" content="Aditya Athalye">
<meta name="description"
      content="Every so often, I want to avoid opening a website in a browser, for ... reasons.">
<meta name="keywords" content="systems thinking,functional programming,architecture,software design,technology leadership,devops,clojure,B2B Micro SaaS">
<meta property="og:title" content="Poor man&apos;s Reader App with Pandoc &amp; Bash">
<meta property="og:description" content="Every so often, I want to avoid opening a website in a browser, for ... reasons.">
<meta property="og:locale" content="en_GB">
<meta property="og:type" content="website">
<meta property="og:url" content="https://www.evalapply.org/posts/reader-app-pandoc-bash/index.html">
    <!-- Preload logo as it is on all pages -->
<link rel="preload" href="https://www.evalapply.org/static/img/Lisp_logo.svg" as="image" type="image/svg+xml" />
<!-- Preload font files and font styles, before layout styles to reduce layout shift -->
<link rel="preload" href="https://www.evalapply.org/static/fonts/google/firacode/v22/uU9eCBsR6Z2vfE9aq3bL0fxyUs4tcw4W_D1sJVD7Ng.woff2" as="font" type="font/woff2"
      crossorigin>
<link rel="preload" href="https://www.evalapply.org/static/fonts/google/gentiumbookplus/v1/vEFN2-RHBgUK5fbjKxRpbBtJPyRpocKdT7HmqQ.woff2" as="font" type="font/woff2"
      crossorigin>
<link rel="preload" href="https://www.evalapply.org/static/fonts/google/gentiumbookplus/v1/vEFL2-RHBgUK5fbjKxRpbBtJPyRpocKYf7M.woff2" as="font" type="font/woff2"
      crossorigin>
<link rel="preload" href="https://www.evalapply.org/static/fonts/google/ptsansnarrow/v18/BngRUXNadjH0qYEzV7ab-oWlsbCGwR0.woff2" as="font" type="font/woff2"
      crossorigin>
<link rel="stylesheet preload" type="text/css" as="style" href="https://www.evalapply.org/static/css/fonts.css">
<link rel="stylesheet preload" type="text/css" as="style" href="https://www.evalapply.org/static/css/style.css">
<link href="https://www.evalapply.org/index.xml"
      rel="alternate" type="application/rss+xml"
      title="Aditya Athalye writes and works here.">
<link rel="canonical" href="https://www.evalapply.org/posts/reader-app-pandoc-bash/index.html">
<link rel="icon" type="image/vnd.microsoft.icon" href="https://www.evalapply.org/static/img/favicon.ico">
    <base target="_blank">
</head>
  <body>
    <div id="the-very-top" class="stack center box">
        <header id="site-header">
  <div class="box invert stack">
    <div class="with-sidebar site-header">
      <a class="box icon" href="https://www.evalapply.org/index.html" target="_self">
        <img src="https://www.evalapply.org/static/img/Lisp_logo.svg" alt="Aditya Athalye writes and works here." width="60" height="60">
      </a>
      <div class="stack">
        <h1 class="site-header title">Aditya Athalye writes and works here.</h1>
        
        <nav class="cluster site-header site-header:nav-items">
          <a href="https://www.evalapply.org/hire.html#main" target="_self">
  $ work
</a>
<a href="https://www.evalapply.org/posts/index.html" target="_self">
  &#9753; read
</a>
<a href="https://www.youtube.com/@evalapplydotorg/playlists" target="_blank" target="_self">
  &#10087; see
</a>
<a href="https://www.evalapply.org/about.html#standing-invitation" target="_self">
  &#x2709; mail
</a>
<a href="https://www.evalapply.org/about.html" target="_self">
  &lambda; self
</a>
<a href="https://www.evalapply.org/now.html#main" target="_self">
  &raquo; now
</a>
<a href="https://www.evalapply.org/index.xml" target="_blank">
  &asymp; feed
</a>
        </nav>
        <p class="footnotes"> Coming soon (April 2025): "Project
          <a href="https://www.evalapply.org/index.html#writing-for-nerds">
            Writing for nerds"</a>.
        </p>
      </div>
    </div>
  </div>
</header>
  <main id="main">
    <article id="blog-post" class="stack">
  <header class="stack">
      <p class="title">Poor man's Reader App with Pandoc & Bash</p>

      <p class="cluster post-meta">
        
        <span class="date">Published: 2022-02-10</span>
        <span class="date">Updated: 2022-02-10</span>
        <span class="author">By: Aditya Athalye</span>
      </p>

      <p class="summary">
        Every so often, I want to avoid opening a website in a browser, for ... reasons.
      </p>
     <div class="post-meta"><hr></div>
     <div class="post-meta">
            <nav class="cluster">
        <a href="mailto:blog.comments@evalapply.org?subject=DELETE_ME_HUMAN Poor man's Reader App with Pandoc & Bash" rel="bookmark">&#x2709; email me comments</a>
        <span>&raquo; share &rarr;</span>
        <a href="https://bsky.app/intent/compose?text=Poor%20man%27s%20Reader%20App%20with%20Pandoc%20%26%20Bash%20https%3A%2F%2Fwww.evalapply.org%2Fposts%2Freader-app-pandoc-bash%2Findex.html" target="_blank">[bsky]</a>
        <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fwww.evalapply.org%2Fposts%2Freader-app-pandoc-bash%2Findex.html" target="_blank">[in]</a>
        <a href="https://news.ycombinator.com/submitlink?u=https%3A%2F%2Fwww.evalapply.org%2Fposts%2Freader-app-pandoc-bash%2Findex.html&t=Poor%20man%27s%20Reader%20App%20with%20Pandoc%20%26%20Bash" target="_blank"> [HN]</a>
        <a href="https://lobste.rs/stories/new" target="_blank">[lobste.rs]</a>
        <a href="http://www.reddit.com/submit?url=https%3A%2F%2Fwww.evalapply.org%2Fposts%2Freader-app-pandoc-bash%2Findex.html&title=Poor%20man%27s%20Reader%20App%20with%20Pandoc%20%26%20Bash" target="_blank">[reddit]</a>
        <a class="site-feed" href="https://www.evalapply.org/index.xml" target="_blank">feed</a>
      </nav>
      <p><hr></p>
      <form
  class="footer cluster"
  action="https://buttondown.com/api/emails/embed-subscribe/evalapply"
  method="post"
  target="popupwindow"
  autocomplete="on"
  onsubmit="window.open('https://buttondown.com/evalapply', 'popupwindow')"
  >
  <input type="email" name="email" id="bd-email" autocomplete="on" />
  <label for="bd-email" hidden>Email</label>
  <span>
    <input type="submit" value="Get posts by email" />
    <input type="hidden" name="tag" value="everyone" />
<input type="hidden" name="tag" value="via-blog-post" />
  </span>
</form>
      <p><hr></p>
      <nav class="cluster">
        <span>Tags:</span>
        <a href="https://www.evalapply.org/tags/functional_programming/index.html#main" target="_self">#functional_programming</a><a href="https://www.evalapply.org/tags/bash/index.html#main" target="_self">#bash</a><a href="https://www.evalapply.org/tags/unix/index.html#main" target="_self">#unix</a><a href="https://www.evalapply.org/tags/riff/index.html#main" target="_self">#riff</a>
      </nav>
    </div>
  </header>
  <hr>
  <section class="stack">
      <p><em>Throwback, June 27, 2020.</em></p>
<p>Every so often, I want to avoid opening a website in a browser, for … reasons.</p>
<p>Curl alone presents too much html. I want to try and read stuff.</p>
<p>Today, I was playing with Igor Chubin's <strong>awesome</strong> terminal services (wttr.in, cht.sh etc.), and it hit me:</p>
<p>"WAIT, there's pandoc, what if I just … "</p>
<p>—</p>
<p>… … … and an hour later… a terrible idea manifested itself.</p>
<pre class="shell"><code>www_to_md() {
    pandoc --wrap=none -f html -t markdown &quot;${1}&quot;
}

drop_noise() {
    # remove pesky divs
    grep -v -E &quot;(&lt;div|&lt;/div).*[&gt;]?|*.&gt;&quot; |
        # squeeze multiple blank lines into one
        cat -s
}

cache_site() {
    local sitecache=&quot;${1:?&#39;Fail. Path to create cache.&#39;}&quot;
    local mdfilename=&quot;${2:-&#39;this.md&#39;}&quot;
    local evict_cache_qmark=&quot;${3:-no}&quot;

    mkdir -p &quot;${sitecache}&quot;

    if [[ -f &quot;${sitecache}/${mdfilename}&quot; &amp;&amp; &quot;${evict_cache_qmark}&quot; == &quot;no&quot; ]]
    then tee
    else tee &quot;${sitecache}/${mdfilename}&quot;
    fi
}

panwww() {
    local siteurl=&quot;${1}&quot;
    local evict_cache_qmark=&quot;${2:-no}&quot;
    local sitename=&quot;${siteurl/http*:\/\//www.}&quot;
    local sitecache=&quot;/tmp/panwwwcache/${sitename}&quot;
    local mdfilename=&quot;this.md&quot;

    if [[ -f &quot;${sitecache}/${mdfilename}&quot; &amp;&amp; &quot;${evict_cache_qmark}&quot; == &quot;no&quot; ]]
    then local cmd=&quot;cat ${sitecache}/${mdfilename}&quot;
    else local cmd=&quot;www_to_md ${siteurl}&quot;
    fi

    $cmd | drop_noise | cache_site &quot;${sitecache}&quot; &quot;${mdfilename}&quot; &quot;${evict_cache_qmark}&quot;
}
</code></pre>
<p>so that …</p>
<pre class="shell"><code>panwww &quot;https://www.recurse.com/&quot; | less # fetches site the first time
panwww &quot;https://www.recurse.com/&quot; | less # looks up &quot;cache&quot;
panwww &quot;https://www.recurse.com/&quot; &quot;refetch&quot; | less
</code></pre>
  </section>
  <footer id="blog-post-footer" class="footer stack">
    <hr>
    <nav class="cluster">
      <span>&uarr; <a href="#blog-post-toc" rel="bookmark" target="_self">toc</a></span>
      <span>&uarr; <a href="#blog-post" rel="bookmark" target="_self">title</a></span>
      <span>&uarr; <a href="#site-header" rel="bookmark" target="_self">menu</a></span>
    </nav>
    <hr>
          <nav class="cluster">
        <a href="mailto:blog.comments@evalapply.org?subject=DELETE_ME_HUMAN Poor man's Reader App with Pandoc & Bash" rel="bookmark">&#x2709; email me comments</a>
        <span>&raquo; share &rarr;</span>
        <a href="https://bsky.app/intent/compose?text=Poor%20man%27s%20Reader%20App%20with%20Pandoc%20%26%20Bash%20https%3A%2F%2Fwww.evalapply.org%2Fposts%2Freader-app-pandoc-bash%2Findex.html" target="_blank">[bsky]</a>
        <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fwww.evalapply.org%2Fposts%2Freader-app-pandoc-bash%2Findex.html" target="_blank">[in]</a>
        <a href="https://news.ycombinator.com/submitlink?u=https%3A%2F%2Fwww.evalapply.org%2Fposts%2Freader-app-pandoc-bash%2Findex.html&t=Poor%20man%27s%20Reader%20App%20with%20Pandoc%20%26%20Bash" target="_blank"> [HN]</a>
        <a href="https://lobste.rs/stories/new" target="_blank">[lobste.rs]</a>
        <a href="http://www.reddit.com/submit?url=https%3A%2F%2Fwww.evalapply.org%2Fposts%2Freader-app-pandoc-bash%2Findex.html&title=Poor%20man%27s%20Reader%20App%20with%20Pandoc%20%26%20Bash" target="_blank">[reddit]</a>
        <a class="site-feed" href="https://www.evalapply.org/index.xml" target="_blank">feed</a>
      </nav>
    <form
  class="footer cluster"
  action="https://buttondown.com/api/emails/embed-subscribe/evalapply"
  method="post"
  target="popupwindow"
  autocomplete="on"
  onsubmit="window.open('https://buttondown.com/evalapply', 'popupwindow')"
  >
  <input type="email" name="email" id="bd-email" autocomplete="on" />
  <label for="bd-email" hidden>Email</label>
  <span>
    <input type="submit" value="Get posts by email" />
    <input type="hidden" name="tag" value="everyone" />
<input type="hidden" name="tag" value="via-blog-post" />
  </span>
</form>
  </footer>
</article>
  </main>
      <footer id="site-footer">
  <hr>
  <div class="box invert footer stack">
    <p class="center">&copy; 2025,
      <a href="https://www.linkedin.com/in/adityaathalye/" target="_blank">Aditya Athalye</a>.
      <span>All content licensed
        <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/" target="_blank">
          CC BY-SA 4.0
        </a>, except where noted otherwise.
      </span>
    </p>
    <p class="center">
      Built with
      <a href="https://github.com/adityaathalye/shite" target="_blank">shite</a>,
      GNU <a href="https://www.gnu.org/software/emacs/" target="_blank">Emacs</a>,
      <a href="https://orgmode.org" target="_blank">org-mode</a>, and &#x1F5A4;.
    </p>
    <p class="center">
      My
      <a href="https://buttondown.com/evalapply" target="_blank">newsletter</a>
      is powered by
      <a href="https://buttondown.com/refer/evalapply" target="_blank">Buttondown</a>.
    </p>
    <div class="rc-scout-wrapper center">
      <div class="rc-scout" data-scout-rendered="true">
        <p class="rc-scout__text">
          <i class="rc-scout__logo"></i>
          Want to become a better programmer?
          <a class="rc-scout__link" href="https://www.recurse.com/scout/click?t=40533398b8c93bb4f3323a170e032e91" target="_blank">Join the Recurse Center!</a>
        </p>
      </div>
      <style class="rc-scout__style" type="text/css">.rc-scout { display: block; padding: 0; border: 0; margin: 0; } .rc-scout__text { display: block; padding: 0; border: 0; margin: 0; height: 100%; font-size: 100%; } .rc-scout__logo { display: inline-block; padding: 0; border: 0; margin: 0; width: 0.85em; height: 0.85em; background: no-repeat center url('data:image/svg+xml;utf8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2012%2015%22%3E%3Crect%20x%3D%220%22%20y%3D%220%22%20width%3D%2212%22%20height%3D%2210%22%20fill%3D%22%23000%22%3E%3C%2Frect%3E%3Crect%20x%3D%221%22%20y%3D%221%22%20width%3D%2210%22%20height%3D%228%22%20fill%3D%22%23fff%22%3E%3C%2Frect%3E%3Crect%20x%3D%222%22%20y%3D%222%22%20width%3D%228%22%20height%3D%226%22%20fill%3D%22%23000%22%3E%3C%2Frect%3E%3Crect%20x%3D%222%22%20y%3D%223%22%20width%3D%221%22%20height%3D%221%22%20fill%3D%22%233dc06c%22%3E%3C%2Frect%3E%3Crect%20x%3D%224%22%20y%3D%223%22%20width%3D%221%22%20height%3D%221%22%20fill%3D%22%233dc06c%22%3E%3C%2Frect%3E%3Crect%20x%3D%226%22%20y%3D%223%22%20width%3D%221%22%20height%3D%221%22%20fill%3D%22%233dc06c%22%3E%3C%2Frect%3E%3Crect%20x%3D%223%22%20y%3D%225%22%20width%3D%222%22%20height%3D%221%22%20fill%3D%22%233dc06c%22%3E%3C%2Frect%3E%3Crect%20x%3D%226%22%20y%3D%225%22%20width%3D%222%22%20height%3D%221%22%20fill%3D%22%233dc06c%22%3E%3C%2Frect%3E%3Crect%20x%3D%224%22%20y%3D%229%22%20width%3D%224%22%20height%3D%223%22%20fill%3D%22%23000%22%3E%3C%2Frect%3E%3Crect%20x%3D%221%22%20y%3D%2211%22%20width%3D%2210%22%20height%3D%224%22%20fill%3D%22%23000%22%3E%3C%2Frect%3E%3Crect%20x%3D%220%22%20y%3D%2212%22%20width%3D%2212%22%20height%3D%223%22%20fill%3D%22%23000%22%3E%3C%2Frect%3E%3Crect%20x%3D%222%22%20y%3D%2213%22%20width%3D%221%22%20height%3D%221%22%20fill%3D%22%23fff%22%3E%3C%2Frect%3E%3Crect%20x%3D%223%22%20y%3D%2212%22%20width%3D%221%22%20height%3D%221%22%20fill%3D%22%23fff%22%3E%3C%2Frect%3E%3Crect%20x%3D%224%22%20y%3D%2213%22%20width%3D%221%22%20height%3D%221%22%20fill%3D%22%23fff%22%3E%3C%2Frect%3E%3Crect%20x%3D%225%22%20y%3D%2212%22%20width%3D%221%22%20height%3D%221%22%20fill%3D%22%23fff%22%3E%3C%2Frect%3E%3Crect%20x%3D%226%22%20y%3D%2213%22%20width%3D%221%22%20height%3D%221%22%20fill%3D%22%23fff%22%3E%3C%2Frect%3E%3Crect%20x%3D%227%22%20y%3D%2212%22%20width%3D%221%22%20height%3D%221%22%20fill%3D%22%23fff%22%3E%3C%2Frect%3E%3Crect%20x%3D%228%22%20y%3D%2213%22%20width%3D%221%22%20height%3D%221%22%20fill%3D%22%23fff%22%3E%3C%2Frect%3E%3Crect%20x%3D%229%22%20y%3D%2212%22%20width%3D%221%22%20height%3D%221%22%20fill%3D%22%23fff%22%3E%3C%2Frect%3E%3C%2Fsvg%3E'); } .rc-scout__link:link, .rc-scout__link:visited { color: var(--color-dark); text-decoration: underline; text-underline-offset: var(--scale-xxxs); } .rc-scout__link:hover, .rc-scout__link:active { color: #4e8b1d; }
      </style>
    </div>
  </div>
</footer>
    </div>
  </body>
</html>
