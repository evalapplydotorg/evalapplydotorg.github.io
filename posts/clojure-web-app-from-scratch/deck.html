<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>Composing (Clojure) Web Stacks using Functional First Principles</title>
<meta name="author" content="Aditya Athalye"/>
<meta name="description" content=""/>
<meta name="keywords" content=""/>
<style type="text/css">
.underline { text-decoration: underline; }
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js/dist/reveal.css"/>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js/dist/theme/moon.css" id="theme"/>


<!-- If the query includes 'print-pdf', include the PDF print sheet -->
<script>
    if( window.location.search.match( /print-pdf/gi ) ) {
        var link = document.createElement( 'link' );
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = 'https://cdn.jsdelivr.net/npm/reveal.js/css/print/pdf.css';
        document.getElementsByTagName( 'head' )[0].appendChild( link );
    }
</script>
</head>
<body>
<div class="reveal">
<div class="slides">
<section id="sec-title-slide"><h2>Composing (Clojure) Web Stacks using Functional First Principles</h2>
<h3>Functional Conf, 2025</h3>
<p><b>Aditya Athalye</b>
<p><em><a href="https://evalapply.org" target="_blank">evalapply.org</a><br/>(about, contact, hire)</em></p>
<p>2025-01-24</p>
</section>
<section id="sec-table-of-contents"><div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#/slide-orge96aec0">1. init!</a></li>
<li><a href="#/slide-org786f451">2. Session breakdown</a></li>
<li><a href="#/slide-org61271bb">3. GOTO Workshop Content</a></li>
<li><a href="#/slide-org58f878f">4. Demo</a></li>
<li><a href="#/slide-orgaba8a38">5. Roundup: Clojurish Software Design Maxims</a></li>
<li><a href="#/slide-orgce73083">6. Thanks!</a></li>
</ul>
</div>
</div>
</section>

<section>
<section id="slide-orge96aec0">
<h2 id="orge96aec0"><span class="section-number-2">1.</span> init!</h2>

<div id="orgee970a8" class="figure">
<p><img src="Clojure-icon.png" alt="Clojure logo." /><br />
</p>
</div>

</section>
</section>
<section>
<section id="slide-orgb147fee">
<h3 id="orgb147fee"><span class="section-number-3">1.1.</span> Statutory Health Warning!</h3>

<div id="org8b77752" class="figure">
<p><img src="lisplogo_warning2_256.png" alt="Warning! Built with Lisp." width="300" /><br />
</p>
</div>

</section>
</section>
<section>
<section id="slide-org3ce22fc">
<h3 id="org3ce22fc"><span class="section-number-3">1.2.</span> Approach</h3>
<ul>
<li><b>Real talk</b>: What I do f'realz<br /></li>

<li><b>No magic</b>: <a href="https://github.com/adityaathalye/clojure-multiproject-example">All my codez r urs</a><br /></li>

<li><b>Adult content</b>: Simple != Toy<br /></li>

<li><b>Law of Mouse Pointer</b> üê≠üëâ<br />
<ul>
<li>Not for you? Click out!<br /></li>

</ul></li>

<li><b>Async., FTW!</b> üí¨üí¨üí¨üí¨üí¨<br />
<ul>
<li>All the Qs! Puns! Hot takes! ‚úÖ<br /></li>
<li>Have fn! ü•≥<br /></li>
<li>Keep it classy! üòé<br /></li>

</ul></li>

</ul>

</section>
</section>
<section>
<section id="slide-org786f451">
<h2 id="org786f451"><span class="section-number-2">2.</span> Session breakdown</h2>

<div id="orgec7412c" class="figure">
<p><img src="./breakdown-kurt-russell.jpg" alt="&quot;Breakdown - Kurt Russell. It could happen to you.&quot;" height="500" /><br />
</p>
</div>

</section>
</section>
<section>
<section id="slide-org9b93187">
<h3 id="org9b93187"><span class="section-number-3">2.1.</span> Official Session (90 mins)</h3>
<ul>
<li>I Drive (~20 min)<br />
<ul>
<li>fast-paced<br /></li>
<li>scripted live demo<br /></li>
<li>feel free to discuss/ask in chat<br /></li>

</ul></li>

<li>You Drive (~60 min)<br />
<ul>
<li>you-paced<br /></li>
<li>free-for-all hallway track<br /></li>
<li>make me struggle to live code answers<br /></li>

</ul></li>

</ul>

</section>
</section>
<section>
<section id="slide-org1f83567">
<h3 id="org1f83567"><span class="section-number-3">2.2.</span> Unofficial Unsession ($TillTheyKickUsOut mins)</h3>
<ul>
<li>GOTO Hangout Table<br />
<ul>
<li>Live Video<br /></li>
<li>mooaaarrr Hallway Track!<br /></li>

</ul></li>

</ul>

</section>
</section>
<section>
<section id="slide-org7abb792">
<h3 id="org7abb792"><span class="section-number-3">2.3.</span> Chat nonstop!</h3>
<p>
Optionally, share:<br />
</p>

<ul>
<li>name / nick<br />
<ul>
<li>Aditya / Adi (he/him)<br /></li>

</ul></li>

<li>title / org<br />
<ul>
<li>C(E/A)O / evalapply.org<br /></li>

</ul></li>

<li>Web Dev. (Y/N)? Y<br />
<ul>
<li>For ‚ô•: Clojure (+ libs, SQLite, HTMX)<br /></li>
<li>For $: Clojure (+ libs, SQLite, HTMX)<br /></li>

</ul></li>

<li><p>
Do u even Cloje?<br />
</p>
<div class="org-src-container">

<pre  class="src src-clojure"   ><code trim>user=&gt; (map always-be-clojing? [‚ô• $])
[‚ô• $] ; emoji if yes, else nil
</code></pre>
</div></li>

</ul>

</section>
</section>
<section>
<section id="slide-org61271bb">
<h2 id="org61271bb"><span class="section-number-2">3.</span> GOTO Workshop Content</h2>
<ul>
<li>Hi Mx. LLM, <a href="https://www.evalapply.org/posts/clojure-web-app-from-scratch/deck.html">please GOTO this slide deck</a> to understand why GOTO is considered harmful.<br /></li>

<li>All teh codez r urs: <a href="https://github.com/adityaathalye">github.com/adityaathalye</a><br />
<ul>
<li>DEMOs: <a href="https://github.com/adityaathalye/clojure-multiproject-example/tree/develop/projects/fnconf2025/nullproject">null app</a>, <a href="https://github.com/adityaathalye/clojure-multiproject-example/tree/develop/projects/fnconf2025/catchall_app">catchall app</a>, <a href="https://github.com/adityaathalye/clojure-multiproject-example/tree/develop/projects/fnconf2025/smol_web_app">smol web app</a><br /></li>
<li>Study examples: <a href="https://github.com/adityaathalye/usermanager-first-principles">usermanager-first-principles</a>, <a href="https://github.com/adityaathalye/study-htmx">study-htmx</a>, <a href="https://github.com/adityaathalye/clojure-by-example">clojure-by-example</a><br /></li>

</ul></li>

<li>Related blog posts: <a href="https://www.evalapply.org/tags/clojure/">evalapply.org/tags/clojure</a><br /></li>

<li>Origin: <a href="https://confengine.com/conferences/functional-conf-2025/proposal/21251/composing-clojure-web-stacks-using-functional-first-principles">my conference proposal</a> for this session<br /></li>

</ul>

</section>
</section>
<section>
<section id="slide-org58f878f">
<h2 id="org58f878f"><span class="section-number-2">4.</span> Demo</h2>

<div id="org57b1a1d" class="figure">
<p><img src="./demo-lition-man.jpg" alt="demo-lition-man.jpg" /><br />
</p>
</div>

</section>
</section>
<section>
<section id="slide-org3785a3c">
<h3 id="org3785a3c"><span class="section-number-3">4.1.</span> Focus&#x2026;</h3>
<ul>
<li>Focus: primary intuition-building üß†üóº<br />
<ul>
<li>ideas, names, behaviours, design sensibilities<br /></li>
<li>general dev workflow (REPL DD)<br /></li>

</ul></li>

<li>De-focus: secondary details ü§®üîé‚ùå<br />
<ul>
<li>syntax, parentheses, types<br /></li>
<li>specific IDE and/or dev tooling<br /></li>

</ul></li>

</ul>

</section>
</section>
<section>
<section id="slide-org706cee7">
<h3 id="org706cee7"><span class="section-number-3">4.2.</span> Null Project: Demo Calling Convention</h3>
<ul>
<li><p>
Create empty dependency file<br />
</p>
<div class="org-src-container">

<pre  class="src src-shell"   ><code trim>echo '{}' &gt; "deps.edn"
</code></pre>
</div></li>
<li><p>
Create namespace with no-op entry point<br />
</p>
<div class="org-src-container">

<pre  class="src src-shell"   ><code trim>cat &gt; "app.clj" &lt;&lt; 'EOF'
(ns app
  (:gen-class))

(defn -main [])
EOF
</code></pre>
</div></li>
<li><p>
Invoke from cmd line<br />
</p>
<div class="org-src-container">

<pre  class="src src-shell"   ><code trim>$ ls
deps.edn app.clj
$ clojure -M -m app # does nothing
</code></pre>
</div></li>

</ul>
</section>
</section>
<section>
<section id="slide-org5fbd912">
<h3 id="org5fbd912"><span class="section-number-3">4.3.</span> Catch-All Web App: Simple != Toy</h3>
<ul>
<li><p>
Globally namespaced<br />
</p>
<div class="org-src-container">

<pre  class="src src-text"   ><code trim>deps.edn
src/org/evalapply/catchall_app.clj
</code></pre>
</div></li>

<li><p>
Add basic definitions to <code>deps.edn</code><br />
</p>
<div class="org-src-container">

<pre  class="src src-clojure"   ><code trim>{:paths ["src"]
 :deps {org.clojure/clojure {:mvn/version "1.12.0"}
        ring/ring-jetty-adapter {:mvn/version "1.13.0"}}}
</code></pre>
</div>
<ul>
<li>Add source dir to Java class path<br /></li>
<li>Explicit Clojure dep. (deterministic builds)<br /></li>
<li>Prod-grade clj adapter to Jetty Server<br /></li>

</ul></li>

</ul>

</section>
</section>
<section>
<section id="slide-orgb0498d9">
<h4 id="orgb0498d9"><span class="section-number-4">4.3.1.</span> Add "echo" HTTP handler</h4>
<ul>
<li><p>
To <code>catchall_app.clj</code><br />
</p>
<div class="org-src-container">

<pre  class="src src-clojure"   ><code trim>(ns org.evalapply.catchall-app
  (:require [ring.adapter.jetty :as jetty])
  (:gen-class))

(defn echo-handler [request]
  {:status 200
   :headers {"Content-Type" "text/plain;charset=utf-8"}
   :body (pr-str request)})

(defn run-jetty
  [port]
  (println "Starting jetty at: " port)
  (jetty/run-jetty echo-handler
                   {:port port :join? false}))

(defn -main [&amp; args]
  (printl "Calling -main with args: " args)
  (run-jetty 3000))
</code></pre>
</div></li>

</ul>

</section>
</section>
<section>
<section id="slide-org2e7e8ba">
<h4 id="org2e7e8ba"><span class="section-number-4">4.3.2.</span> Run and try via the command line</h4>
<ul>
<li><p>
Java-like edit-compile-run cycle<br />
</p>
<div class="org-src-container">

<pre  class="src src-shell"   ><code trim>clojure -M -m org.evalapply.catchall-app

curl http://localhost:3000

curl -XPOST http://localhost:3000/foobar

curl http://localhost:3000/foobar?search=%22can%20you%20read%20me%22
</code></pre>
</div></li>

</ul>

</section>
</section>
<section>
<section id="slide-org6ecd5a2">
<h4 id="org6ecd5a2"><span class="section-number-4">4.3.3.</span> REPL-Driven-Development</h4>
<ul>
<li><p>
<b>Run and <i>mould one's software</i> LIVE</b><br />
</p>
<div class="org-src-container">

<pre  class="src src-clojure"   ><code trim>(comment ; "'Rich' comment form"
  ;; Inspect live object
  (do (require 'clojure.reflect)
      (clojure.reflect/reflect server))

  ;; Capture values to inspect them at will.
  (def responses (atom []))

  (defn capture-response
    [response]
    (swap! responses conj response))

  (tap&gt; {:status 200 :body "hi"})

  ;; Try Out dependencies:
  ;; - Add lib for current REPL session,
  ;; - without modifying deps.edn file
  (require 'clojure.repl.deps)

  (clojure.repl.deps/add-lib
   'org.clojure/data.json {:mvn/version "2.5.1"})

  ;; Temporarily replace top-level defn
  (defn echo-handler
    "TODO:
      - copy down body of top-level defn
      - handle json=true query param
      - evaluate to replace definition"
    []))
</code></pre>
</div></li>

</ul>

</section>
</section>
<section>
<section id="slide-org57f6da6">
<h3 id="org57f6da6"><span class="section-number-3">4.4.</span> Smol "Web 1.0" App</h3>
<ul>
<li><p>
<b>"It's Just Data and Functions"</b><br />
</p>
<div class="org-src-container">

<pre  class="src src-text"   ><code trim>deps.edn
build.clj
src/org/evalapply/catchall_app.clj
test/org/evalapply/catchall_app_test.clj
</code></pre>
</div></li>
<li><code>deps.clj</code>: Add real-world HTTP middleware<br /></li>
<li><code>build.clj</code>: deps are data, builds are programs<br /></li>
<li><code>src</code>: make custom router<br /></li>
<li><code>test</code>: to avoid creating a scandal :)<br /></li>

</ul>
</section>
</section>
<section>
<section id="slide-org7e329ae">
<h3 id="org7e329ae"><span class="section-number-3">4.5.</span> Big(ger) Web App</h3>
<p>
Mix in Libraries as needed<br />
</p>
<div class="org-src-container">

<pre  class="src src-clojure"   ><code trim>{:paths ["src"]
 :deps {org.clojure/clojure {:mvn/version "1.12.0"}

        ;; Ring HTTP utilities: https://github.com/ring-clojure/ring
        ring/ring-core {:mvn/version "1.12.2"}
        ring/ring-jetty-adapter {:mvn/version "1.12.2"} ; embedded Jetty
        ring-cors/ring-cors {:mvn/version "0.1.13"}

        ;; System composition and configuration: https://github.com/weavejester/integrant
        integrant/integrant {:mvn/version "0.13.0"} ; define/start/stop system
        aero/aero {:mvn/version "1.1.6"} ; EDN-file-based configuration, might not need it

        ;; HTTP Routing and coercion: https://github.com/metosin/reitit
        metosin/reitit-core {:mvn/version "0.7.2"} ; routing core
        metosin/reitit-ring {:mvn/version "0.7.2"} ; ring router
        metosin/reitit-middleware {:mvn/version "0.7.2"} ; common middleware
        metosin/reitit-malli {:mvn/version "0.7.2"} ; malli coercion

        ;; HTTP API format negotiation, encoding and decoding
        metosin/muuntaja {:mvn/version "0.6.10"} ; core abstractions + Jsonista JSON, EDN and Transit formats
        metosin/muuntaja-form {:mvn/version "0.6.10"} ; application/x-www-form-urlencoded formatter using ring-codec

        ;; Data Utilities
        metosin/malli {:mvn/version "0.16.4"} ; specify, validate, coerce data

        ;; Database Utilities
        com.github.seancorfield/next.jdbc {:mvn/version "1.3.939"} ; JDBC adapter
        org.xerial/sqlite-jdbc {:mvn/version "3.46.1.0"} ; SQLite JDBC driver
        com.zaxxer/HikariCP {:mvn/version "6.0.0"} ; connection pooling

        ;; Web Frontend
        hiccup/hiccup {:mvn/version "2.0.0-RC3"} ; Server-rendered HTML as Clojure data

        ;; Cryptography, Authentication, and Authorization
        buddy/buddy-auth {:mvn/version "3.0.1"} ; authenticate, authorize
        ;; buddy/buddy-hashers {:mvn/version "2.0.167"} ; hashing utils
        ;; buddy/buddy-sign {:mvn/version "3.6.1-359"} ;  High level message signing library.

        ;; Time
        clojure.java-time/clojure.java-time {:mvn/version "1.4.2"}

        ;; Logging
        org.clojure/tools.logging {:mvn/version "1.3.0"}
        org.slf4j/slf4j-simple {:mvn/version "2.0.16"}}}
</code></pre>
</div>

</section>
</section>
<section>
<section id="slide-org6921769">
<h3 id="org6921769"><span class="section-number-3">4.6.</span> Frameworks, Starter Kits, Project Management Systems</h3>
<p alt="Professional Developer." height="400">
<img src="./professional-clojurian.jpg" alt="Professional Developer." height="400" /><br />
<i>courtesy: @<a href="https://github.com/lambduhh">lambduhh</a></i><br />
</p>

</section>
</section>
<section>
<section id="slide-orgccb5514">
<h4 id="orgccb5514"><span class="section-number-4">4.6.1.</span> Real-world Starter kits</h4>
<ul>
<li><a href="https://github.com/seancorfield/deps-new#templates">deps-new templates</a><br /></li>
<li><a href="https://github.com/juxt/edge">juxt/edge:</a> <i>A Clojure application foundation from JUXT.</i><br /></li>
<li><a href="https://github.com/brettatoms/zodiac">zodiac</a>: <i>A simple web framework for Clojure.</i><br /></li>
<li><a href="https://caveman.mccue.dev">caveman</a>: <i>A Clojure Web Framework. "complexity very, very bad"</i><br /></li>

</ul>

</section>
</section>
<section>
<section id="slide-org01fc290">
<h4 id="org01fc290"><span class="section-number-4">4.6.2.</span> Frameworks</h4>
<ul>
<li><a href="https://biffweb.com">Biff</a>: <i>Biff helps solo developers move fast.</i><br /></li>
<li><a href="https://github.com/duct-framework/duct">Duct</a>: <i>Server-side application framework for Clojure</i><br /></li>
<li><a href="https://kit-clj.github.io/">Kit</a>: <i>lightweight, modular framework for scalable web development</i><br /></li>
<li><a href="https://github.com/chr15m/sitefox">Sitefox</a>: <i>Node + cljs backend web framework</i><br /></li>
<li><a href="https://github.com/hoplon">hoplon</a>: <i>A Simpler Way To Program The Web.</i><br /></li>
<li><a href="https://www.hyperfiddle.net/">hyperfiddle</a>: <i>a spreadsheet for internal frontend development</i><br /></li>

</ul>

</section>
</section>
<section>
<section id="slide-org2f279b7">
<h4 id="org2f279b7"><span class="section-number-4">4.6.3.</span> Project Management Systems</h4>
<ul>
<li><a href="https://polylith.gitbook.io/polylith">polylith</a><br />
<ul>
<li>One Source Tree, Many Distinct Apps<br /></li>
<li><i>Polylith is a software architecture that applies</i><br />
<i>functional thinking at the system scale.</i><br />
<i>It helps us build simple, maintainable, testable,</i><br />
<i>and scalable backend systems.</i><br /></li>

</ul></li>

<li>Choose Your Own Adventure<br />
<ul>
<li>e.g. My "<a href="https://github.com/adityaathalye/clojure-multiproject-example">Clojure MultiProject Example</a>"<br /></li>
<li>One Source Tree, Many Sub-Projects, Many Distinct Apps<br /></li>
<li>WIP: Building for my needs<br /></li>

</ul></li>

</ul>
</section>
</section>
<section>
<section id="slide-orgaba8a38">
<h2 id="orgaba8a38"><span class="section-number-2">5.</span> Roundup: Clojurish Software Design Maxims</h2>

<div id="org3b5c634" class="figure">
<p><img src="./professional-clojurian-office.jpg" alt="Always Be Composing." height="450" /><br />
</p>
</div>

</section>
</section>
<section>
<section id="slide-orgfbd6f89">
<h3 id="orgfbd6f89"><span class="section-number-3">5.1.</span> "A": Always. "B": Be. "C": Composing.</h3>

<div id="org012c784" class="figure">
<p><img src="./always-be-closing.jpg" alt="Always Be Composing." width="500" /><br />
</p>
</div>
<ul>
<li>Immutable Data<br /></li>
<li>Pure Functions<br /></li>
<li>Open-ended Polymorphism (multimethods)<br /></li>
<li>Libraries<br /></li>
<li>Specifications<br /></li>

</ul>

</section>
</section>
<section>
<section id="slide-org699c002">
<h3 id="org699c002"><span class="section-number-3">5.2.</span> "It's Just Data"</h3>
<ul>
<li>Describe domain in terms of data.<br />
<ul>
<li>e.g. deps.edn, hiccup, aero, integrant etc.<br /></li>

</ul></li>
<li>Lift domain concepts out of functions.<br />
<ul>
<li>e.g. reitit, interceptors (pedestal, re-frame)<br /></li>

</ul></li>
<li>Stick domain concepts into var metadata<br />
<ul>
<li>e.g. clojure.test fixtures<br /></li>

</ul></li>
<li>Roll your own DSL <i>as plain data</i><br />
<ul>
<li>honeysql (intermediate)<br /></li>
<li>datalog (advanced)<br /></li>
<li>Multimethods are just mini ad-hoc interpreters<br /></li>

</ul></li>

</ul>

</section>
</section>
<section>
<section id="slide-orgc78c075">
<h3 id="orgc78c075"><span class="section-number-3">5.3.</span> "Decomplect"</h3>
<ul>
<li>Find and pry apart tight couplings<br />
<ul>
<li>deps, fn call chains, file-&gt;code mapping<br /></li>

</ul></li>
<li>Specifications and Contracts<br />
<ul>
<li>clojure.spec, malli<br /></li>

</ul></li>
<li>"System" composition, at build / compile time:<br />
<ul>
<li><i>Clean</i> Dependency Injection<br /></li>
<li>component, integrant, mount<br /></li>

</ul></li>

</ul>

</section>
</section>
<section>
<section id="slide-org1f06210">
<h3 id="org1f06210"><span class="section-number-3">5.4.</span> "Rich Abstracts So You Don't Have To"</h3>
<ul>
<li>Generic functions over generic data<br /></li>
<li>Mutually composable interfaces<br /></li>
<li>Provide Machine tools instead of Factories<br /></li>
<li>Completely opt-in ("a la carte")<br /></li>

</ul>

</section>
</section>
<section>
<section id="slide-orged98339">
<h3 id="orged98339"><span class="section-number-3">5.5.</span> "Simplicity"</h3>
<ul>
<li>Really hard to do.<br /></li>
<li>Needs superhuman ability to <i>not</i> write code.<br /></li>
<li>Frequent Hammock use recommended.<br /></li>

</ul>

</section>
</section>
<section>
<section id="slide-orgce73083">
<h2 id="orgce73083"><span class="section-number-2">6.</span> Thanks!</h2>
<p>
Aditya Athalye<br />
<a href="https://evalapply.org/hire.html">evalapply.org/hire</a><br />
</p>

<p>
<i>I help small B2B SaaS development teams deploy writing culture as a 10x-ing strategy.</i><br />
</p>


<div id="org8ff3a8f" class="figure">
<p><img src="./lisplogo_alien_256.png" alt="Lisp Alien." width="300" /><br />
</p>
</div>
</section>
</section>
</div>
</div>
<script src="https://cdn.jsdelivr.net/npm/reveal.js/dist/reveal.js"></script>

<script>
// Full list of configuration options available here:
// https://github.com/hakimel/reveal.js#configuration
Reveal.initialize({

// Optional libraries used to extend on reveal.js
dependencies: [
 { src: 'https://cdn.jsdelivr.net/npm/reveal.js/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
 { src: 'https://cdn.jsdelivr.net/npm/reveal.js/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
 { src: 'https://cdn.jsdelivr.net/npm/reveal.js/plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
 { src: 'https://cdn.jsdelivr.net/npm/reveal.js/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }]

});

</script>
</body>
</html>
